# 几何证明填空练习系统

这是一个用于几何证明填空练习的交互式学习系统，包含完整的题目管理工具。

## 📁 文件结构

```
几何证明/
├── 几何证明.html          # 主练习页面
├── question-manager.html   # 题目管理工具
├── questions.json         # 题目数据文件
└── README.md             # 使用说明
```

## 🚀 系统优化特点

### 1. 数据分离
- ✅ 题目数据独立存储在 `questions.json` 文件中
- ✅ 代码与数据分离，便于维护和扩展
- ✅ 支持动态加载题目数据

### 2. 可视化管理
- ✅ 提供专用的题目管理工具
- ✅ 直观的图形界面，无需编程知识
- ✅ 实时SVG预览功能

### 3. 便捷操作
- ✅ 支持题目的增删改查
- ✅ 支持导入/导出功能
- ✅ 自动生成题目ID

## 📖 使用指南

### 🎯 学生练习

1. 打开 `几何证明.html` 文件
2. 选择题目类型和时间模式
3. 点击"开始练习"
4. 按照提示完成几何证明填空

### 🔧 教师管理题目

1. 打开 `question-manager.html` 文件
2. 查看现有题目统计信息
3. 使用管理工具进行题目操作

#### 添加新题目
1. 点击"➕ 新建题目"
2. 填写题目基本信息：
   - 题目ID（自动生成）
   - 题目标题
   - 题目分类
   - 题目描述
3. 编写SVG图形代码（支持实时预览）
4. 添加证明步骤：
   - 输入步骤文本
   - 使用 `__BLANK_0__` 标记填空位置
   - 填写正确答案
5. 添加选项列表
6. 设置正确答案序列
7. 点击"💾 保存题目"

#### 编辑现有题目
1. 在左侧题目列表中点击要编辑的题目
2. 修改相应内容
3. 点击"💾 保存题目"

#### 删除题目
1. 选择要删除的题目
2. 点击"🗑️ 删除题目"
3. 确认删除操作

#### 导入/导出题目
- **导出**：点击"💾 导出题目"下载 JSON 文件
- **导入**：点击"📁 导入题目"选择 JSON 文件

## 📝 题目数据格式

```json
{
  "parallel": [
    {
      "id": "parallel_001",
      "title": "题目标题",
      "description": "题目描述",
      "svg": "<svg>...</svg>",
      "steps": [
        {
          "text": "步骤文本（__BLANK_0__）",
          "blanks": [
            {
              "text": "(　　)",
              "correct": "正确答案"
            }
          ]
        }
      ],
      "options": ["选项1", "选项2", "选项3"],
      "correctAnswers": ["答案1", "答案2"]
    }
  ]
}
```

## 🎨 SVG图形绘制指南

### 基本图形元素
- **直线**：`<line x1="50" y1="50" x2="200" y2="50" stroke="black" stroke-width="2"/>`
- **圆**：`<circle cx="150" cy="100" r="50" fill="none" stroke="black" stroke-width="2"/>`
- **多边形**：`<polygon points="80,50 150,160 50,160" fill="none" stroke="black" stroke-width="2"/>`
- **弧线**：`<path d="M 100 100 A 20 20 0 0 1 120 120" stroke="red" stroke-width="2" fill="none"/>`

### 标注文本
```svg
<text x="100" y="50" font-family="serif" font-size="16">A</text>
```

### 角度标记
```svg
<path d="M 100 100 A 15 15 0 0 1 115 115" stroke="blue" stroke-width="2" fill="none"/>
```

### 颜色建议
- 主要图形：黑色 `#000000`
- 平行线：蓝色 `#2196F3`
- 角度标记：红色 `#FF0000` 或蓝色 `#0000FF`
- 辅助线：绿色 `#00FF00`

## 🔍 常见问题

### Q: 如何添加多个填空的步骤？
A: 在步骤文本中使用 `__BLANK_0__`、`__BLANK_1__` 等标记，在填空答案中用逗号分隔多个答案。

### Q: SVG图形显示不正常？
A: 检查SVG代码语法，确保所有标签正确闭合，可以使用在线SVG编辑器先测试。

### Q: 如何备份题目数据？
A: 定期使用"导出题目"功能下载 `questions.json` 文件作为备份。

### Q: 题目顺序如何调整？
A: 在题目管理工具中删除后重新添加，或直接编辑 JSON 文件调整数组顺序。

## 🛠️ 技术特性

- **响应式设计**：适配不同屏幕尺寸
- **本地存储**：无需服务器即可运行
- **模块化设计**：便于功能扩展
- **错误处理**：完善的异常处理机制
- **数据验证**：确保题目数据完整性

## 📈 扩展建议

1. **增加题目类型**：可以添加更多几何证明分类
2. **难度分级**：为题目添加难度标记
3. **学习进度**：记录学生学习进度和成绩
4. **智能推荐**：根据答题情况推荐相关题目
5. **多媒体支持**：支持添加视频或动画辅助说明

## 📞 技术支持

如有问题或建议，请：
1. 检查浏览器控制台错误信息
2. 确认文件路径和权限设置
3. 验证 JSON 文件格式正确性
4. 测试 SVG 代码有效性

---

*最后更新时间：2024年12月* 

## 📋 最近更新记录

### 2024年12月 - 角度证明题目扩展

#### 会话主要目的
为几何证明练习系统的角度证明分类添加新题目，丰富题目库内容。

#### 完成的主要任务
1. ✅ 在角度证明分类中新增一道题目（ID: angle_003）
2. ✅ 题目主题：平行线内错角相等证明
3. ✅ 绘制了完整的SVG几何图形
4. ✅ 设计了多步骤的证明过程
5. ✅ 配置了相应的选项和正确答案

#### 关键决策和解决方案
1. **题目设计**：选择经典的平行线判定问题，涵盖内错角相等和同旁内角互补两种判定方法
2. **图形绘制**：基于用户提供的图片文件（01.png），使用SVG重现几何图形
3. **证明步骤**：设计了4个填空步骤，涵盖不同的角度关系判定
4. **选项配置**：提供6个选项，包括正确答案和常见干扰项

#### 使用的技术栈
- HTML5 + CSS3 + JavaScript
- SVG图形绘制技术
- JSON数据结构设计
- 模块化题目管理系统

#### 修改的文件
- `几何证明.html`：在questionDatabase的angle分类中添加了新题目数据
- `README.md`：添加本次更新记录

#### 新增题目详情
- **题目ID**：angle_003
- **题目标题**：平行线内错角相等证明
- **题目类型**：角度证明
- **填空数量**：4个
- **选项数量**：6个
- **难度级别**：中等
- **知识点**：平行线的判定定理（内错角相等、同旁内角互补）

### 2024年12月 - 图片显示功能扩展

#### 会话主要目的
为几何证明练习系统添加图片显示功能，支持在题目下方显示实际图片。

#### 完成的主要任务
1. ✅ 在题目数据结构中添加`imageUrl`字段
2. ✅ 修改题目生成函数支持图片显示
3. ✅ 添加图片加载失败的SVG备用方案
4. ✅ 实现图片点击放大/缩小功能
5. ✅ 添加美观的CSS样式和交互效果
6. ✅ 更新题目模板生成器

#### 关键决策和解决方案
1. **图片优先显示**：当题目有图片地址时，优先显示图片，SVG作为备用方案
2. **错误处理机制**：图片加载失败时自动显示SVG图形和错误提示
3. **交互体验**：添加图片hover效果和点击放大功能
4. **兼容性设计**：保持对现有题目的完全兼容，imageUrl为可选字段
5. **样式优化**：统一的视觉风格和响应式设计

#### 使用的技术栈
- HTML5图片元素和错误处理
- CSS3过渡动画和变换效果
- JavaScript事件处理和DOM操作
- 响应式布局设计

#### 修改的文件
- `几何证明.html`：
  - 添加imageUrl字段到题目数据
  - 修改generateQuestionFromData函数
  - 新增CSS样式类
  - 添加图片交互JavaScript函数
  - 更新题目模板生成器
- `README.md`：添加功能说明和使用指南

#### 新功能特性
- **图片显示**：支持jpg、png、gif等常见图片格式
- **自动回退**：图片加载失败时自动显示SVG备用图形
- **交互体验**：
  - 鼠标悬停时图片轻微放大
  - 点击图片可以放大1.5倍查看细节
  - 再次点击恢复原始大小
- **视觉效果**：
  - 圆角边框和阴影效果
  - 平滑的过渡动画
  - 错误提示信息
- **兼容性**：完全向下兼容，不影响现有题目

#### 使用方法
1. **添加图片**：在题目数据中设置`imageUrl`字段
2. **图片路径**：支持相对路径（如`./01.png`）和绝对路径
3. **备用方案**：即使有图片，也建议保留SVG代码作为备用
4. **交互操作**：点击图片可以放大查看细节

### 2024年12月 - 历史记录增强

#### 会话主要目的
在历史记录表格中增加题目选项列，让用户能够回顾每道题的可选答案。

#### 完成的主要任务
1. ✅ 在历史记录表格中新增"可选项"列
2. ✅ 修改`addToHistory`函数支持选项参数
3. ✅ 新增`generateOptionsString`函数生成格式化选项
4. ✅ 更新`copyHistory`函数适应新表格结构
5. ✅ 添加选项列的专门CSS样式

#### 关键决策和解决方案
1. **表格结构调整**：在题目和答案之间插入可选项列
2. **选项格式化**：使用A、B、C...编号方式展示选项
3. **样式优化**：选项列左对齐，小字体，支持换行
4. **数据完整性**：确保历史记录包含完整的题目信息
5. **向后兼容**：保持复制功能和JSON导出的完整性

#### 使用的技术栈
- HTML表格结构优化
- CSS选择器和样式定制
- JavaScript数组处理和字符串格式化
- JSON数据结构扩展

#### 修改的文件
- `几何证明.html`：
  - 更新表格表头结构
  - 修改`addToHistory`函数签名和实现
  - 新增`generateOptionsString`函数
  - 更新`checkPlayerAnswer`中的调用
  - 修改`copyHistory`函数适应新结构
  - 添加选项列专用CSS样式
- `README.md`：添加功能说明

#### 新功能特性
- **完整记录**：历史记录现在包含每道题的所有可选项
- **清晰展示**：选项以A、B、C...格式编号显示
- **空间优化**：选项列宽度受限，自动换行
- **数据导出**：JSON导出包含选项信息
- **用户体验**：方便回顾和分析答题过程

#### 表格新结构
| 题目 | 可选项 | 答案 | 正确答案 | 结果 | 用时(秒) |
|------|--------|------|----------|------|----------|
| 题目内容 | A. 选项1<br/>B. 选项2<br/>... | 用户答案 | 正确答案 | 正确/错误 | 答题时间 | 