<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        // 定义题型名称变量 - 只需修改这里即可更改整个页面的题型名称
        const exerciseType = "H01几何证明";
        // 设置页面标题
        document.title = exerciseType;
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script id="MathJax-script" async src=".\mathjax\mathjax\es5\tex-mml-chtml.js"></script>
    <style>
        body {
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: Arial, sans-serif;
        }

        .header {
            text-align: center;
            width: 100%;
            margin-bottom: 20px;
        }

        .player-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: 80%;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background-color: #f0f8ff;
            position: relative;
        }

        .question-box {
            min-height: 60px;
            display: block;
            text-align: center;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 5px;
            background-color: white;
            width: 90%;
        }
        
        .question-content {
            margin-bottom: 20px;
        }
        
        .sample-indicator {
            display: block;
            margin-top: 20px;
            color: #888;
            font-style: italic;
            text-align: center;
            border-top: 1px dashed #ccc;
            padding-top: 10px;
        }

        .answer-input {
            padding: 10px;
            font-size: 16px;
            width: 80%;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .timer {
            margin: 10px 0;
            font-size: 16px;
            font-weight: bold;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: white;
            margin: 5px;
        }

        button:hover {
            background-color: #0056b3;
        }

        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        .result {
            min-height: 20px;
            margin: 10px 0;
        }

        .score {
            margin-top: 10px;
            font-size: 18px;
            font-weight: bold;
        }

        .correct {
            color: green;
        }

        .incorrect {
            color: red;
        }

        .rendered-answer {
            margin-top: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            padding: 10px;
            width: 80%;
            min-height: 30px;
            background-color: white;
        }

        .history-container {
            margin-top: 30px;
            width: 100%;
            max-width: 1200px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: auto;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }

        /* 解题过程列样式 */
        td:nth-child(2), td:nth-child(3) {
            text-align: left;
            font-size: 13px;
            line-height: 1.5;
            max-width: 300px;
            word-wrap: break-word;
            padding: 12px 8px;
        }

        th {
            background-color: #f4f4f4;
        }

        .copy-button {
            margin-top: 10px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: #28a745;
            color: white;
        }

        .copy-button:hover {
            background-color: #218838;
        }

        #copy-success {
            display: none;
            margin-top: 10px;
            color: green;
            font-size: 14px;
        }
        
        .winner-indicator {
            font-weight: bold;
            font-size: 18px;
            margin: 10px 0;
        }
        
        .player-row {
            background-color: rgba(240, 248, 255, 0.3);
        }

        .timer-options {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .timer-display {
            font-size: 18px;
            font-weight: bold;
            color: #007bff;
        }

        .game-end-message {
            font-size: 20px;
            font-weight: bold;
            color: #28a745;
            margin: 15px 0;
            padding: 10px;
            border: 2px solid #28a745;
            border-radius: 5px;
            background-color: rgba(40, 167, 69, 0.1);
            display: none;
        }

        /* 几何证明相关样式 */
        .proof-steps {
            width: 90%;
            margin: 20px 0;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            min-height: 200px;
        }

        .proof-step {
            margin: 10px 0;
            padding: 8px;
            border-bottom: 1px solid #eee;
            font-size: 16px;
            line-height: 1.5;
        }

        .proof-step:last-child {
            border-bottom: none;
        }

        .blank-space {
            display: inline-block;
            min-width: 120px;
            padding: 2px 8px;
            margin: 0 2px;
            border: 1px solid #007bff;
            border-radius: 3px;
            background-color: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .blank-space:hover {
            background-color: #e3f2fd;
            border-color: #0056b3;
        }

        .blank-space.filled {
            background-color: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .blank-space.selected {
            background-color: #fff3cd;
            border-color: #ffc107;
            box-shadow: 0 0 5px rgba(255, 193, 7, 0.5);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 5px rgba(255, 193, 7, 0.5); }
            50% { box-shadow: 0 0 15px rgba(255, 193, 7, 0.8); }
            100% { box-shadow: 0 0 5px rgba(255, 193, 7, 0.5); }
        }

        .options-container {
            width: 90%;
            margin: 20px 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }

        .option-button {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            text-align: center;
        }

        .option-button:hover {
            background-color: #f0f8ff;
            border-color: #007bff;
        }

        .option-button.used {
            background-color: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .option-button.correct {
            background-color: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .option-button.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .option-button.reused {
            background-color: #e2f3ff;
            border-color: #007bff;
            color: #0056b3;
            position: relative;
        }

        .option-button.reused::after {
            content: "✓";
            position: absolute;
            top: 2px;
            right: 5px;
            color: #007bff;
            font-weight: bold;
            font-size: 12px;
        }

        .option-button.reusable {
            border: 2px dashed #28a745;
            position: relative;
        }

        .option-button.reusable::before {
            content: "♻";
            position: absolute;
            top: -2px;
            right: 3px;
            color: #28a745;
            font-size: 12px;
            font-weight: bold;
        }

        .game-hint {
            background-color: #e6f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-size: 14px;
            color: #004080;
            text-align: center;
            width: 90%;
        }

        /* 分类选择样式 */
        .category-selection {
            margin: 20px 0;
            text-align: center;
        }

        .category-selection h4 {
            margin-bottom: 15px;
            color: #333;
        }

        .category-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .category-btn {
            padding: 8px 16px;
            font-size: 14px;
            border: 2px solid #007bff;
            border-radius: 20px;
            background-color: white;
            color: #007bff;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 100px;
        }

        .category-btn:hover {
            background-color: #e3f2fd;
            transform: translateY(-1px);
        }

        .category-btn.active {
            background-color: #007bff;
            color: white;
            box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3);
        }

        .category-btn:disabled {
            background-color: #f8f9fa;
            color: #6c757d;
            border-color: #dee2e6;
            cursor: not-allowed;
            transform: none;
        }

        /* 题目图片样式 */
        .question-image {
            max-width: 400px;
            max-height: 300px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .question-image:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .image-container {
            margin: 15px 0;
            position: relative;
        }

        .image-error-message {
            color: #dc3545;
            font-size: 14px;
            font-style: italic;
            margin-top: 10px;
        }

        .svg-fallback {
            margin: 15px 0;
            opacity: 0.8;
            border: 2px dashed #ccc;
            border-radius: 5px;
            padding: 10px;
            background-color: #f8f9fa;
        }

        /* 添加模态框样式 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 1000px;
            max-height: 80vh;
            overflow-y: auto;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: black;
        }

        .preview-question {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f8f9fa;
        }

        .preview-question h3 {
            color: #007bff;
            margin-bottom: 15px;
        }

        .preview-steps {
            margin-top: 15px;
            padding-left: 20px;
        }

        .preview-step {
            margin: 8px 0;
            line-height: 1.6;
        }

        .preview-options {
            margin-top: 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .preview-option {
            background-color: #e9ecef;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
        }

        .preview-correct-answer {
            margin-top: 15px;
            color: #28a745;
            font-weight: bold;
        }

        /* 修改打印样式 */
        @media print {
            body * {
                visibility: hidden;
            }
            #previewModal {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                height: auto !important;
                background: white;
                overflow: visible !important;
                display: block !important;
            }
            #previewModal * {
                visibility: visible;
            }
            .modal-content, .modal-body {
                margin: 0 !important;
                padding: 20px !important;
                box-shadow: none !important;
                height: auto !important;
                max-height: none !important;
                overflow: visible !important;
            }
            .close, #previewAllBtn, .print-button {
                display: none !important;
            }
            .preview-question, .preview-options, .preview-steps, .preview-correct-answer {
                page-break-inside: avoid;
                break-inside: avoid;
            }
            img {
                max-width: 100% !important;
                page-break-inside: avoid;
                break-inside: avoid;
            }
            @page {
                margin: 2cm;
                size: A4;
            }
        }

        /* 修改预览模态框样式 */
        .modal-content {
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-body {
            padding: 20px;
            overflow-y: auto;
        }

        /* 添加打印按钮样式 */
        .print-button {
            background-color: #28a745;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .print-button:hover {
            background-color: #218838;
        }

        .print-button i {
            font-size: 16px;
        }
    </style>
</head>
<body>

    
    <!-- 添加音效元素 -->
    <audio id="correctSound" preload="auto">
        <source src="https://assets.mixkit.co/active_storage/sfx/2018/2018-preview.mp3" type="audio/mpeg">
    </audio>
    <audio id="wrongSound" preload="auto">
        <source src="https://assets.mixkit.co/active_storage/sfx/2691/2691-preview.mp3" type="audio/mpeg">
    </audio>
    <audio id="successSound" preload="auto">
        <source src="https://assets.mixkit.co/active_storage/sfx/2005/2005-preview.mp3" type="audio/mpeg">
    </audio>
    

    

    
    <div class="player-container" id="playerContainer">
        <h3 id="exerciseTypeTitle">H01几何证明</h3>
        <div class="category-buttons">
            <button id="category-angle" class="category-btn active" onclick="setCategory('angle')">H0101角度证明</button>
            <button id="previewAllBtn" class="category-btn" onclick="previewAllQuestions()">预览所有题目</button>
        </div>
        <div class="timer-options">
            <button id="five-min-btn" class="timer-btn" onclick="setTimerMode('five-min')">5分钟</button>
            <button id="ten-min-btn" class="timer-btn" onclick="setTimerMode('ten-min')">10分钟</button>
            <button id="no-limit-btn" class="timer-btn" onclick="setTimerMode('no-limit')">无限时间</button>
            <button id="resetGameBtn" onclick="resetGame()" disabled>重新开始</button>
            <button id="startGameBtn" onclick="startGame()">开始练习</button>
        </div>
        <div class="game-end-message" id="gameEndMessage"></div>
        <div class="question-box" id="playerQuestion"></div>
        <!-- 操作提示 -->
        <div id="proofSteps" class="proof-steps"></div>
        <button id="playerSubmitBtn" onclick="checkPlayerAnswer()" disabled>提交答案</button>
        
        <!-- 选项容器 -->
        <div id="optionsContainer" class="options-container"></div>
        



        <div class="result" id="playerResult"></div>
        <div class="score" id="playerScore">正确: 0 | 错误: 0 | 连续答对: 0 | 总题数: 0</div>
        <div class="timer" id="playerTimer">时间: 0秒</div>
        <div class="timer-display" id="countdownTimer" style="display: none;">剩余时间: 05:00</div>
    </div>
    </div>
    
    <div class="history-container">
        <button class="copy-button" onclick="copyHistory()">复制历史记录</button>
        <div id="copy-success">历史记录已复制到剪贴板！</div>
        
        <table>
            <thead>
                <tr>
                    <th>题型</th>
                    <th>题目</th>
                    <th>解题过程</th>
                    <th>正确解题过程</th>
                    <th>结果</th>
                    <th>用时(秒)</th>
                </tr>
            </thead>
            <tbody id="history"></tbody>
        </table>
    </div>

    <!-- 修改预览模态框的头部 -->
    <div id="previewModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>题目预览</h2>
                <div style="display: flex; align-items: center;">
                    <button class="print-button" onclick="printPreview()">
                        <i>🖨️</i> 打印题目
                    </button>
                    <span class="close" onclick="closePreviewModal()">&times;</span>
                </div>
            </div>
            <div class="modal-body" id="previewContent">
                <!-- 预览内容将在这里动态生成 -->
            </div>
        </div>
    </div>

    <script>
        // 全局变量
        let playerCorrectAnswer; // 玩家题目的正确答案
        let correctAnswer; // 保留此变量用于兼容原有函数
        let playerCorrectCount = 0;
        let playerIncorrectCount = 0;
        let playerTotalCount = 0;
        let consecutiveCorrectCount = 0; // 连续答对的题目数
        let gameInProgress = false;
        let playerTime = 0;
        let playerQuestionStartTime = 0;
        let playerTimer;
        let countdownTimer; // 倒计时计时器
        let timerMode = 'five-min'; // 默认无限时间
        let timeLimit = 300; // 时间限制（秒）
        let remainingTime = 300; // 剩余时间（秒）
        
        // 几何证明相关变量
        let currentProofData = null;
        let selectedBlank = null;
        let userAnswers = {};
        let usedOptions = new Set();
        let reusableOptions = new Set(); // 可重复使用的选项
        let currentCategory = 'all'; // 当前选择的题目分类
        
        // 数组随机打乱函数（Fisher-Yates洗牌算法）
        function shuffleArray(array) {
            const shuffled = [...array]; // 创建数组副本
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }
        // 结构化题目数据库 - 只保留角的证明题型
        const questionDatabase = {
            angle: [
                {
                    id: 'angle_001',
                    title: '角的证明辅助线',
                    imageUrl: './0101.png',
                    description: '已知：如图，AB∥CD． 求证：∠AEC=∠A+∠C．',
                    steps: [
                        { text: '已知：如图，AB∥CD', blanks: null },
                        { text: '证明：如图，过点E作GH∥AB ', blanks: null },
                        { text: '∵AB∥CD（__BLANK_0__）', blanks: [{ text: "　　", correct: "已知" }] },
                        { text: '∴CD∥GH∥AB（__BLANK_0__）', blanks: [{ text: "　　", correct: "平行于同一条直线的两条直线互相平行" }] },
                        { text: '∴∠A=∠1，∠2=∠C（__BLANK_0__）',blanks: [{ text: "　　", correct: "两直线平行，内错角相等" }] },
                        { text: '∴∠AEC=∠1+∠2', blanks: null },
                        { text: '=∠A+∠C（__BLANK_0__）',blanks: [{ text: "　　", correct: "等式性质" }] },
                    ],
                    options: [
                        '两直线平行，内错角相等',
                        '等式性质',
                        '已知',
                        '平行于同一条直线的两条直线互相平行',
                    ],
                    correctAnswers: ['已知', '平行于同一条直线的两条直线互相平行', '两直线平行，内错角相等', '等式性质']
                },
                {
                    id: 'angle_002',
                    title: '四边形角度综合辅助线',
                    imageUrl: './0102.png',
                    description: '已知：如图，在四边形ABCD中，∠A=20°，∠B=40°，∠C=30°．求∠ADC的度数．',
                    steps: [
                        { text: '已知：如图，在四边形ABCD中，∠A=20°，∠B=40°，∠C=30°', blanks: null },
                        { text: '解：如图，延长AD交BC于点E．', blanks: null },
                        { text: '∵∠1是△ABE的一个外角（__BLANK_0__）', blanks: [{ text: '　　', correct: '外角的定义' }] },
                        { text: '∴∠1=∠A+∠B（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的一个外角等于和它不相邻的两个内角的和' }] },
                        { text: '∵∠ADC是△CDE的一个外角（__BLANK_0__）', blanks: [{ text: '　　', correct: '外角的定义' }] },
                        { text: '∴∠ADC=∠1+∠C（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的一个外角等于和它不相邻的两个内角的和' }] },
                        { text: '∴∠ADC=∠A+∠B+∠C（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '∵∠A=20°，∠B=40°，∠C=30°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠ADC=20°+40°+30°=90°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] }
                    ],
                    options: [
                        '外角的定义',
                        '三角形的一个外角等于和它不相邻的两个内角的和',
                        '等量代换',
                        '已知'
                    ],
                    correctAnswers: [
                        '外角的定义',
                        '三角形的一个外角等于和它不相邻的两个内角的和',
                        '外角的定义',
                        '三角形的一个外角等于和它不相邻的两个内角的和',
                        '等量代换',
                        '已知',
                        '等量代换'
                    ]
                },
                {
                    id: 'angle_003',
                    title: '平行线与三角形内角和综合推理',
                    imageUrl: './0103.png',
                    description: '已知：如图，AB∥CD，AE∥DF，∠A=50°，∠C=25°，求∠F的度数．',
                    steps: [
                        { text: '已知：如图，AB∥CD，AE∥DF，∠A=50°，∠C=25°', blanks: null },
                        { text: '解：如图，延长AE交CD于点G．', blanks: null },
                        { text: '∵AB∥CD（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠1=∠A（__BLANK_0__）', blanks: [{ text: '　　', correct: '两直线平行，内错角相等' }] },
                        { text: '∵∠A=50°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠1=50°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '∵∠C=25°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠2=180°-∠1-∠C=180°-50°-25°=105°（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的内角和等于180°' }] },
                        { text: '∵AE∥DF（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠F=∠2=105°（__BLANK_0__）', blanks: [{ text: '　　', correct: '两直线平行，同位角相等' }] }
                    ],
                    options: [
                        '已知',
                        '两直线平行，内错角相等',
                        '等量代换',
                        '三角形的内角和等于180°',
                        '两直线平行，同位角相等'
                    ],
                    correctAnswers: [
                        '已知',
                        '两直线平行，内错角相等',
                        '已知',
                        '等量代换',
                        '已知',
                        '三角形的内角和等于180°',
                        '已知',
                        '两直线平行，同位角相等'
                    ]
                },
                {
                    id: 'angle_004',
                    title: '平行线与辅助线综合推理',
                    imageUrl: './0104.png',
                    description: '已知，如图，AB∥CD，∠A=55°，∠C=60°，∠1=20°，求∠AEF的度数.',
                    steps: [
                        { text: '已知：如图，AB∥CD，∠A=55°，∠C=60°，∠1=20°', blanks: null },
                        { text: '解：如图，过点E作GH∥AB．', blanks: null },
                        { text: '∵AB∥CD（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴CD∥GH∥AB（__BLANK_0__）', blanks: [{ text: '　　', correct: '平行于同一条直线的两条直线互相平行' }] },
                        { text: '∴∠A=∠3，∠C=∠GEC（__BLANK_0__）', blanks: [{ text: '　　', correct: '两直线平行，内错角相等' }] },
                        { text: '∵∠A=55°，∠C=60°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠3=55°，∠GEC=60°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '∵∠1=20°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠2=∠GEC-∠1=60°-20°=40°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等式性质' }] },
                        { text: '∴∠AEF=∠2+∠3=40°+55°=95°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等式性质' }] }
                    ],
                    options: [
                        '已知',
                        '平行于同一条直线的两条直线互相平行',
                        '两直线平行，内错角相等',
                        '等量代换',
                        '等式性质'
                    ],
                    correctAnswers: [
                        '已知',
                        '平行于同一条直线的两条直线互相平行',
                        '两直线平行，内错角相等',
                        '已知',
                        '等量代换',
                        '已知',
                        '等式性质',
                        '等式性质'
                    ]
                },
                {
                    id: 'angle_005',
                    title: '平行线与外角综合推理',
                    imageUrl: './0105.png',
                    description: '已知：如图，AB∥EF． 求证：∠1+∠2-∠BCE=180°．',
                    steps: [
                        { text: '已知：如图，AB∥EF．', blanks: null },
                        { text: '证明：如图，延长FE交BC于点G．', blanks: null },
                        { text: '∵AB∥EF（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠1=∠3（__BLANK_0__）', blanks: [{ text: '　　', correct: '两直线平行，内错角相等' }] },
                        { text: '∵∠3是△GCE的一个外角（__BLANK_0__）', blanks: [{ text: '　　', correct: '外角的定义' }] },
                        { text: '∴∠3=∠BCE+∠4（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的一个外角等于和它不相邻的两个内角的和' }] },
                        { text: '∴∠1=∠BCE+∠4（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '∵∠4=180°-∠2（__BLANK_0__）', blanks: [{ text: '　　', correct: '平角的定义' }] },
                        { text: '∴∠1=∠BCE+180°-∠2（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '∴∠1+∠2-∠BCE=180°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等式性质' }] }
                    ],
                    options: [
                        '已知',
                        '两直线平行，内错角相等',
                        '外角的定义',
                        '三角形的一个外角等于和它不相邻的两个内角的和',
                        '等量代换',
                        '平角的定义',
                        '等式性质'
                    ],
                    correctAnswers: [
                        '已知',
                        '两直线平行，内错角相等',
                        '外角的定义',
                        '三角形的一个外角等于和它不相邻的两个内角的和',
                        '等量代换',
                        '平角的定义',
                        '等量代换',
                        '等式性质'
                    ]
                },
                {
                    id: 'angle_006',
                    title: '平行线与辅助线变式推理',
                    imageUrl: './0106.png',
                    description: '已知：如图，AB∥EF． 求证：∠1+∠2-∠BCE=180°．',
                    steps: [
                        { text: '已知：如图，AB∥EF．', blanks: null },
                        { text: '证明：如图，过点C作CG∥AB．', blanks: null },
                        { text: '∵AB∥EF（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴CG∥EF∥AB（__BLANK_0__）', blanks: [{ text: '　　', correct: '平行于同一条直线的两条直线互相平行' }] },
                        { text: '∴∠1=∠BCG（__BLANK_0__）', blanks: [{ text: '　　', correct: '两直线平行，内错角相等' }] },
                        { text: '∠2+∠3=180°（__BLANK_0__）', blanks: [{ text: '　　', correct: '两直线平行，同旁内角互补' }] },
                        { text: '∴∠3=180°-∠2（__BLANK_0__）', blanks: [{ text: '　　', correct: '等式性质' }] },
                        { text: '∵∠3=∠BCG-∠BCE（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠3=∠1-∠BCE（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '∴180°-∠2=∠1-∠BCE（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '∴∠1+∠2-∠BCE=180°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等式性质' }] }
                    ],
                    options: [
                        '已知',
                        '平行于同一条直线的两条直线互相平行',
                        '两直线平行，内错角相等',
                        '两直线平行，同旁内角互补',
                        '等量代换',
                        '等式性质'
                    ],
                    correctAnswers: [
                        '已知',
                        '平行于同一条直线的两条直线互相平行',
                        '两直线平行，内错角相等',
                        '两直线平行，同旁内角互补',
                        '等式性质',
                        '已知',
                        '等量代换',
                        '等量代换',
                        '等式性质'
                    ]
                },
            ],
            basic: [
                {
                    id: 'angle_001',
                    title: '对顶角相等',
                    description: '如图，两直线相交于点O，请完成下面的证明过程：',
                    imageUrl: './0201.png',
                    steps: [
                        { text: "已知：如图，两直线相交于点O", blanks: null },
                        { text: "∵ 两直线相交于点O（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "已知" }] },
                        { text: "∴ ∠1 = ∠2（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "对顶角相等" }] }
                    ],
                    options: ["已知", "对顶角相等", "两直线平行，内错角相等", "等角的补角相等", "同角的补角相等", "垂直定义"],
                    correctAnswers: ["已知", "对顶角相等"]
                },
                {
                    id: 'angle_002',
                    title: '三角形外角定理',
                    description: '如图，在△ABC中，BD是BC的延长线，证明∠3 = ∠1 + ∠2：',
                    imageUrl: './0202.png',
                    steps: [
                        { text: "已知：如图，在△ABC中，BD是BC的延长线", blanks: null },
                        { text: "∵ BD是BC的延长线（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "已知" }] },
                        { text: "∴ ∠3是△ABC的外角（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "外角定义" }] },
                        { text: "∴ ∠3 = ∠1 + ∠2（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "三角形外角等于不相邻两内角之和" }] }
                    ],
                    options: ["已知", "外角定义", "三角形外角等于不相邻两内角之和", "对顶角相等", "三角形内角和为180°", "邻补角互补"],
                    correctAnswers: ["已知", "外角定义", "三角形外角等于不相邻两内角之和"]
                },
                {
                    id: 'angle_003',
                    title: '平行线内错角相等证明',
                    description: '如图，点E在AC的延长线上，下列条件能判断AB∥CD的是：',
                    imageUrl: './0203.png',
                    steps: [
                        { text: "已知：如图，点E在AC的延长线上", blanks: null },
                        { text: "要证明AB∥CD，需要找到合适的角度关系", blanks: null },
                        { text: "当∠1 = ∠2时（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "内错角相等，两直线平行" }] },
                        { text: "当∠3 = ∠4时（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "内错角相等，两直线平行" }] },
                        { text: "当∠D = ∠DCE时（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "内错角相等，两直线平行" }] },
                        { text: "当∠D + ∠ACD = 180°时（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "同旁内角互补，两直线平行" }] }
                    ],
                    options: ["内错角相等，两直线平行", "同旁内角互补，两直线平行", "同位角相等，两直线平行", "对顶角相等", "邻补角互补", "垂直定义"],
                    correctAnswers: ["内错角相等，两直线平行", "内错角相等，两直线平行", "内错角相等，两直线平行", "同旁内角互补，两直线平行"]
                },
                {
                    id: 'angle_004',
                    title: '平行线与三角形外角综合证明',
                    description: '如图，AB∥CD，BE交CD于点F，∠D=24°，∠E=21°，求∠B的度数。',
                    imageUrl: './0204.png',
                    steps: [
                        { text: "已知：如图，AB∥CD，BE交CD于点F，∠D=24°，∠E=21°", blanks: null },
                        { text: "∴ ∠EFC是△EFD的一个外角（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "外角的定义" }] },
                        { text: "∴ ∠EFC = ∠E + ∠D（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "三角形外角等于不相邻两内角之和" }] },
                        { text: "∵ ∠D=24°，∠E=21°（已知）", blanks: null },
                        { text: "∴ ∠EFC = 21° + 24° = 45°（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "等量代换" }] },
                        { text: "∵ AB∥CD（已知）", blanks: null },
                        { text: "∴ ∠B = ∠EFC（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "两直线平行，同位角相等" }] },
                        { text: "∴ ∠B = 45°（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "等量代换" }] }
                    ],
                    options: ["已知", "外角的定义", "三角形外角等于不相邻两内角之和", "等量代换", "两直线平行，内错角相等", "两直线平行，同位角相等", "两直线平行，同旁内角互补", "对顶角相等"],
                    correctAnswers: ["外角的定义", "三角形外角等于不相邻两内角之和", "等量代换", "两直线平行，同位角相等", "等量代换"]
                },
                {
                    id: 'angle_005',
                    title: '平行线与三角形内角综合证明',
                    description: '已知：如图，AB∥CD，点G在AB上，EG与CD交于点F，∠E=40°，∠D=26°，求∠AGE的度数．',
                    imageUrl: './0205.png',
                    steps: [
                        { text: "已知：如图，AB∥CD，点G在AB上，EG与CD交于点F，∠E=40°，∠D=26°", blanks: null },
                        { text: "∵ ∠GFD是△FED的一个外角（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "外角的定义" }] },
                        { text: "∴ ∠GFD = ∠E + ∠D（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "三角形的一个外角等于和它不相邻的两个内角的和" }] },
                        { text: "∵ ∠E=40°，∠D=26°（已知）", blanks: null },
                        { text: "∴ ∠GFD = 40° + 26° = 66°（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "等量代换" }] },
                        { text: "∵ AB∥CD（已知）", blanks: null },
                        { text: "∴ ∠AGE = ∠GFD（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "两直线平行，内错角相等" }] },
                        { text: "∴ ∠AGE = 66°（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "等量代换" }] }
                    ],
                    options: ["外角的定义", "三角形的一个外角等于和它不相邻的两个内角的和", "等量代换", "两直线平行，内错角相等", "两直线平行，同位角相等", "对顶角相等", "邻补角互补", "垂直定义"],
                    correctAnswers: ["外角的定义", "三角形的一个外角等于和它不相邻的两个内角的和", "等量代换", "两直线平行，内错角相等", "等量代换"]
                },
                {
                    id: 'angle_006',
                    title: '平行线与三角形外角综合应用',
                    description: '如图，AE∥BD，∠1=130°，∠C=20°，求∠2的度数。',
                    imageUrl: './0206.png',
                    steps: [
                        { text: '已知：如图，AE∥BD，∠1=130°，∠C=20°', blanks: null },
                        { text: '∵ AE∥BD（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∴ ∠1=∠CBD（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '两直线平行，同位角相等' }] },
                        { text: '∵ ∠1=130°（已知）', blanks: null },
                        { text: '∴ ∠CBD=130°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等量代换' }] },
                        { text: '∴ ∠2=∠C+∠CBD（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '三角形的一个外角等于和它不相邻的两个内角的和' }] },
                        { text: '∵ ∠C=20°，∠CBD=130°（已知及上步）', blanks: null },
                        { text: '∴ ∠2=20°+130°=150°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等量代换' }] }
                    ],
                    options: ['已知', '两直线平行，同位角相等', '等量代换', '三角形的一个外角等于和它不相邻的两个内角的和', '三角形外角等于不相邻两内角之和', '对顶角相等', '邻补角互补'],
                    correctAnswers: ['已知', '两直线平行，同位角相等', '等量代换', '三角形的一个外角等于和它不相邻的两个内角的和', '等量代换']
                },
                {
                    id: 'angle_007',
                    title: '平行线与三角形外角推理',
                    description: '如图，AD与BC交于点O，AB∥CD，∠A=60°，∠C=30°，求∠AOC的度数。',
                    imageUrl: './0207.png',
                    steps: [
                        { text: '已知：如图，AD与BC交于点O，AB∥CD，∠A=60°，∠C=30°', blanks: null },
                        { text: '∵ AB∥CD（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∴ ∠B=∠C（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '两直线平行，内错角相等' }] },
                        { text: '∵ ∠C=30°（已知）', blanks: null },
                        { text: '∴ ∠B=30°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等量代换' }] },
                        { text: '∵ ∠AOC是△ABO的一个外角（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '外角的定义' }] },
                        { text: '∴ ∠AOC=∠A+∠B（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '三角形的一个外角等于和它不相邻的两个内角的和' }] },
                        { text: '∵ ∠A=60°（已知）', blanks: null },
                        { text: '∴ ∠AOC=60°+30°=90°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等量代换' }] }
                    ],
                    options: ['已知', '两直线平行，内错角相等', '等量代换', '外角的定义', '三角形的一个外角等于和它不相邻的两个内角的和', '对顶角相等', '邻补角互补'],
                    correctAnswers: ['已知', '两直线平行，内错角相等', '等量代换', '外角的定义', '三角形的一个外角等于和它不相邻的两个内角的和', '等量代换']
                },
                {
                    id: 'angle_008',
                    title: '平行线与三角形外角差法',
                    description: '如图，AB∥CD，∠1=110°，∠F=50°．求∠C的度数。',
                    imageUrl: './0208.png',
                    steps: [
                        { text: '已知：如图，AB∥CD，∠1=110°，∠F=50°', blanks: null },
                        { text: '∵ AB∥CD（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∴ ∠1=∠CGE（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '两直线平行，同位角相等' }] },
                        { text: '∵ ∠1=110°（已知）', blanks: null },
                        { text: '∴ ∠CGE=110°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等量代换' }] },
                        { text: '∵ ∠CGE是△CGF的一个外角（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '外角的定义' }] },
                        { text: '∴ ∠CGE=∠F+∠C（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '三角形的一个外角等于和它不相邻的两个内角的和' }] },
                        { text: '∵ ∠F=50°（已知）', blanks: null },
                        { text: '∴ ∠C=∠CGE-∠F=110°-50°=60°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等式性质' }] }
                    ],
                    options: ['已知', '两直线平行，同位角相等', '等量代换', '外角的定义', '三角形的一个外角等于和它不相邻的两个内角的和', '等式性质', '三角形内角和是180°', '对顶角相等'],
                    correctAnswers: ['已知', '两直线平行，同位角相等', '等量代换', '外角的定义', '三角形的一个外角等于和它不相邻的两个内角的和', '等式性质']
                },
                {
                    id: 'angle_009',
                    title: '三角形外角与平行线综合推理',
                    description: '如图，AD与BF相交于点C．若∠D=∠A+∠B，∠F=75°，求∠E的度数。',
                    imageUrl: './0209.png',
                    steps: [
                        { text: '已知：如图，AD与BF相交于点C，∠D=∠A+∠B，∠F=75°', blanks: null },
                        { text: '∵ ∠ACF是△ABC的一个外角（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '外角的定义' }] },
                        { text: '∴ ∠ACF=∠A+∠B（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '三角形的一个外角等于和它不相邻的两个内角的和' }] },
                        { text: '∵ ∠D=∠A+∠B（已知）', blanks: null },
                        { text: '∴ ∠D=∠ACF（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等量代换' }] },
                        { text: '∴ BF∥DE（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '同位角相等，两直线平行' }] },
                        { text: '∴ ∠E+∠F=180°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '两直线平行，同旁内角互补' }] },
                        { text: '∵ ∠F=75°（已知）', blanks: null },
                        { text: '∴ ∠E=180°-75°=105°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等式性质' }] }
                    ],
                    options: ['外角的定义', '三角形的一个外角等于和它不相邻的两个内角的和', '等量代换', '同位角相等，两直线平行', '两直线平行，同旁内角互补', '等式性质', '已知', '对顶角相等'],
                    correctAnswers: ['外角的定义', '三角形的一个外角等于和它不相邻的两个内角的和', '等量代换', '同位角相等，两直线平行', '两直线平行，同旁内角互补', '等式性质']
                },
                {
                    id: 'angle_010',
                    title: '四边形内角和与平行线综合证明',
                    description: '如图，AD与EB，FC分别相交于点G，H，∠E+∠F=180°． 求证：∠A+∠B+∠C+∠D=180°。',
                    imageUrl: './0210.png',
                    steps: [
                        { text: '已知：如图，AD与EB，FC分别相交于点G，H，∠E+∠F=180°', blanks: null },
                        { text: '∵ ∠E+∠F=180°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴EB∥FC（__BLANK_0__）', blanks: [{ text: '　　', correct: '两直线平行，同旁内角互补' }] },
                        { text: '∴∠BGH+∠GHC=180°（__BLANK_0__）', blanks: [{ text: '　　', correct: '两直线平行，同旁内角互补' }] },
                        { text: '∵∠BGH是△AGB的一个外角（__BLANK_0__）', blanks: [{ text: '　　', correct: '外角的定义' }] },
                        { text: '∴∠BGH=∠A+∠B（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的一个外角等于和它不相邻的两个内角的和' }] },
                        { text: '∵∠GHC是△HDC的一个外角（__BLANK_0__）', blanks: [{ text: '　　', correct: '外角的定义' }] },
                        { text: '∴∠GHC=∠C+∠D（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的一个外角等于和它不相邻的两个内角的和' }] },
                        { text: '∴∠A+∠B+∠C+∠D=180°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] }
                    ],
                    options: ['已知', '等量代换', '两直线平行，同旁内角互补', '同旁内角互补，两直线平行', '外角的定义', '三角形的一个外角等于和它不相邻的两个内角的和'],
                    correctAnswers: ['已知', '两直线平行，同旁内角互补', '两直线平行，同旁内角互补', '外角的定义', '三角形的一个外角等于和它不相邻的两个内角的和', '外角的定义', '三角形的一个外角等于和它不相邻的两个内角的和', '等量代换']
                },
                {
                    id: 'angle_011',
                    title: '平行线与三角形外角综合推理',
                    description: '如图，EN交AB于M，EH交AB于G，∠1=∠2，∠3=30°，∠EHC=55°，求∠EFG的度数。',
                    imageUrl: './0211.png',
                    steps: [
                        { text: '已知：如图，EN交AB于M，EH交AB于G，∠1=∠2，∠3=30°，∠EHC=55°', blanks: null },
                        { text: '∵ ∠1=∠2（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∴AB∥CD（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '内错角相等，两直线平行' }] },
                        { text: '∴∠EGA=∠EHC（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '两直线平行，同位角相等' }] },
                        { text: '∵∠EHC=55°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∴∠EGA=55°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等量代换' }] },
                        { text: '∵∠EGA是△EGF的一个外角（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '外角的定义' }] },
                        { text: '∴∠EGA=∠3+∠EFG（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '三角形的一个外角等于和它不相邻的两个内角的和' }] },
                        { text: '∵∠3=30°(__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∴∠EFG=∠EGA-∠3=55°-30°=25°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等式性质' }] }
                    ],
                    options: ['已知', '等式性质', '内错角相等，两直线平行', '两直线平行，内错角相等', '两直线平行，同位角相等', '等量代换', '外角的定义', '三角形的一个外角等于和它不相邻的两个内角的和'],
                    correctAnswers: ['已知', '内错角相等，两直线平行', '两直线平行，同位角相等', '等量代换', '外角的定义', '三角形的一个外角等于和它不相邻的两个内角的和', '等式性质']
                },
                
            ],
            rightangle: [
                {
                    id: 'rightangle_001',
                    title: '90°系列转角第一题',
                    description: '如图，已知AB⊥CD，∠1=40°，求∠2的度数。',
                    imageUrl: './0301.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 90°转角示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，AB⊥CD，∠1=40°', blanks: null },
                        { text: '∵ AB⊥CD（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∴ ∠1+∠2=90°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '垂直定义' }] },
                        { text: '∵ ∠1=40°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∴ ∠2=90°-40°=50°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等量代换' }] }
                    ],
                    options: ['已知', '垂直定义', '等量代换', '对顶角相等', '三角形内角和为180°'],
                    correctAnswers: ['已知', '垂直定义', '已知', '等量代换']
                },
                {
                    id: 'rightangle_002',
                    title: '90°系列转角第二题',
                    description: '如图，在△ABC中，点D在BC的延长线上，过点D作DE⊥AB于点E，交AC于点F．已知∠A=35°，∠FCD=85°，求∠D的度数．',
                    imageUrl: './0302.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 90°系列转角第二题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，在△ABC中，点D在BC的延长线上，过点D作DE⊥AB于点E，交AC于点F．已知∠A=35°，∠FCD=85°', blanks: null },
                        { text: '∵∠FCD是△ABC的一个外角（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '外角的定义' }] },
                        { text: '∴∠FCD=∠A+∠B（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '三角形的一个外角等于和它不相邻的两个内角的和' }] },
                        { text: '∴∠B=∠FCD-∠A=85°-35°=50°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等式的性质' }] },
                        { text: '∵DE⊥AB（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∴∠BED=90°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '垂直的定义' }] },
                        { text: '∴∠D=90°-∠B=90°-50°=40°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '直角三角形两锐角互余' }] }
                    ],
                    options: ['外角的定义', '三角形的一个外角等于和它不相邻的两个内角的和', '等式的性质', '已知', '垂直的定义', '直角三角形两锐角互余'],
                    correctAnswers: ['外角的定义', '三角形的一个外角等于和它不相邻的两个内角的和', '等式的性质', '已知', '垂直的定义', '直角三角形两锐角互余']
                },
                {
                    id: 'rightangle_003',
                    title: '90°系列转角第三题',
                    description: '如图，在Rt△ACB中，∠ACB=90°，CD⊥AB，E为AC上一点，G为BC上一点，GF⊥AB，∠1+∠2=180°。求证：DE⊥AC。',
                    imageUrl: './0303.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 90°系列转角第三题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，在Rt△ACB中，∠ACB=90°，CD⊥AB，E为AC上一点，G为BC上一点，GF⊥AB，∠1+∠2=180°', blanks: null },
                        { text: 'CD⊥AB，GF⊥AB（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∠GFB=∠CDB=90°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '垂直的定义' }] },
                        { text: 'CD∥GF（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '同位角相等，两直线平行' }] },
                        { text: '∠3+∠2=180°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '两直线平行，同旁内角互补' }] },
                        { text: '∠1+∠2=180°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∠1=∠3（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '同角或等角的补角相等' }] },
                        { text: 'DE∥BC（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '内错角相等，两直线平行' }] },
                        { text: '∠LAED=∠LACB（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '两直线平行，同位角相等' }] },
                        { text: '∠LACB=90°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∠AED=90°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: 'DE⊥AC（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '垂直的定义' }] }
                    ],
                    options: [
                        '已知',
                        '垂直的定义',
                        '同位角相等，两直线平行',
                        '两直线平行，同旁内角互补',
                        '同角或等角的补角相等',
                        '内错角相等，两直线平行',
                        '两直线平行，同位角相等'
                    ],
                    correctAnswers: [
                        '已知',
                        '垂直的定义',
                        '同位角相等，两直线平行',
                        '两直线平行，同旁内角互补',
                        '已知',
                        '同角或等角的补角相等',
                        '内错角相等，两直线平行',
                        '两直线平行，同位角相等',
                        '已知',
                        '已知',
                        '垂直的定义'
                    ]
                },
                {
                    id: 'rightangle_004',
                    title: '90°系列转角第四题',
                    description: '如图，在△ABC中，∠ACB=90°，E是BC边上的一点，过C作CF⊥AE，垂足为F，过B作BD⊥BC，交CF的延长线于点D。若∠EAC=25°，求∠D的度数。',
                    imageUrl: './0304.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 90°系列转角第四题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，在△ABC中，∠ACB=90°，E是BC边上的一点，过C作CF⊥AE，垂足为F，过B作BD⊥BC，交CF的延长线于点D。若∠EAC=25°，求∠D的度数。', blanks: null },
                        { text: 'CF⊥AE（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∠AFC=90°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '垂直的定义' }] },
                        { text: '∠EAC+∠2=90°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '直角三角形两锐角互余' }] },
                        { text: '∠ACB=90°', blanks: null },
                        { text: '即∠1+∠2=90°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∠1=∠EAC（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '同角或等角的余角相等' }] },
                        { text: '∠EAC=25°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∠1=25°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等量代换' }] },
                        { text: 'BD⊥BC（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∠DBC=90°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '垂直的定义' }] },
                        { text: '∠D=90°-∠1=90°-25°=65°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '直角三角形两锐角互余' }] }
                    ],
                    options: [
                        '已知',
                        '垂直的定义',
                        '直角三角形两锐角互余',
                        '同角或等角的余角相等',
                        '等量代换'
                    ],
                    correctAnswers: [
                        '已知',
                        '垂直的定义',
                        '直角三角形两锐角互余',
                        '已知',
                        '同角或等角的余角相等',
                        '已知',
                        '等量代换',
                        '已知',
                        '垂直的定义',
                        '直角三角形两锐角互余'
                    ]
                },
                {
                    id: 'rightangle_005',
                    title: '90°系列转角第五题',
                    description: '如图，在△ABC中，AD⊥BC，垂足为D，E是CA延长线上一点，EG⊥BC，垂足为G，交AB于点F．若AD平分∠BAC，求证：∠BFG=∠E。',
                    imageUrl: './0305.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 90°系列转角第五题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，在△ABC中，AD⊥BC，垂足为D，E是CA延长线上一点，EG⊥BC，垂足为G，交AB于点F．若AD平分∠BAC，求证：∠BFG=∠E。', blanks: null },
                        { text: '∠ADC=∠EGC=90°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '垂直的定义' }] },
                        { text: 'AD∥EG（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '同位角相等，两直线平行' }] },
                        { text: '∠1=∠BFG，∠2=∠E（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '两直线平行，同位角相等' }] },
                        { text: 'AD平分∠BAC（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∠1=∠2（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '角平分线的定义' }] },
                        { text: '∠BFG=∠E（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等量代换' }] }
                    ],
                    options: [
                        '垂直的定义',
                        '同位角相等，两直线平行',
                        '两直线平行，同位角相等',
                        '已知',
                        '角平分线的定义',
                        '等量代换'
                    ],
                    correctAnswers: [
                        '垂直的定义',
                        '同位角相等，两直线平行',
                        '两直线平行，同位角相等',
                        '已知',
                        '角平分线的定义',
                        '等量代换'
                    ]
                },
                {
                    id: 'rightangle_006',
                    title: '90°系列转角第六题',
                    description: '如图，在Rt△ABC中，∠ACB=90°，∠B=30°，CD⊥AB于点D，∠DCE=15°，∠CEF=135°。求证：EF∥BC。',
                    imageUrl: './0306.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 90°系列转角第六题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，在Rt△ABC中，∠ACB=90°，∠B=30°，CD⊥AB于点D，∠DCE=15°，∠CEF=135°。', blanks: null },
                        { text: 'CD⊥AB（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∠CDB=90°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '垂直的定义' }] },
                        { text: '∠B=30°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∠DCB=90°-∠B=60°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '直角三角形两锐角互余' }] },
                        { text: '∠DCE=15°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∠ECB=∠DCB-∠DCE=60°-15°=45°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等式的性质' }] },
                        { text: '∠CEF=135°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∠CEF+∠ECB=180°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等式的性质' }] },
                        { text: 'EF∥BC（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '同旁内角互补，两直线平行' }] }
                    ],
                    options: [
                        '已知',
                        '垂直的定义',
                        '直角三角形两锐角互余',
                        '等式的性质',
                        '同旁内角互补，两直线平行'
                    ],
                    correctAnswers: [
                        '已知',
                        '垂直的定义',
                        '已知',
                        '直角三角形两锐角互余',
                        '已知',
                        '等式的性质',
                        '已知',
                        '等式的性质',
                        '同旁内角互补，两直线平行'
                    ]
                },
                {
                    id: 'rightangle_007',
                    title: '90°系列转角第七题',
                    description: '如图，在△ABC中，∠B=∠C，D为CA延长线上一点，DF⊥BC于点F，交AB于点E．求证：∠D=∠AED。',
                    imageUrl: './0307.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 90°系列转角第七题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，在△ABC中，∠B=∠C，D为CA延长线上一点，DF⊥BC于点F，交AB于点E．求证：∠D=∠AED。', blanks: null },
                        { text: 'DF⊥BC（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∠EFB=∠DFC=90°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '垂直的定义' }] },
                        { text: '∠2+∠B=90°，∠C+∠D=90°（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '直角三角形两锐角互余' }] },
                        { text: '∠B=∠C（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '已知' }] },
                        { text: '∠2=∠D（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '同角或等角的余角相等' }] },
                        { text: '∠1=∠2（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '对顶角相等' }] },
                        { text: '∠1=∠D（__BLANK_0__）', blanks: [{ text: '(　　)', correct: '等量代换' }] },
                        { text: '∠D=∠AED', blanks: null }
                    ],
                    options: [
                        '已知',
                        '垂直的定义',
                        '直角三角形两锐角互余',
                        '同角或等角的余角相等',
                        '对顶角相等',
                        '等量代换'
                    ],
                    correctAnswers: [
                        '已知',
                        '垂直的定义',
                        '直角三角形两锐角互余',
                        '已知',
                        '同角或等角的余角相等',
                        '对顶角相等',
                        '等量代换'
                    ]
                },
            ],
            // 新增180°系列转角分类
            oneeighty: [
                {
                    id: 'oneeighty_001',
                    title: '180°系列转角第一题',
                    description: '如图，在四边形ABCD中，点E在BC上，AB∥DE，∠B=78°，∠C=60°，求∠EDC的度数．',
                    imageUrl: './0401.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 180°系列转角第一题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，在四边形ABCD中，点E在BC上，AB∥DE，∠B=78°，∠C=60°', blanks: null },
                        { text: '解：如图', blanks: null },
                        { text: '∵AB∥DE（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠DEC=∠B（__BLANK_0__）', blanks: [{ text: '　　', correct: '两直线平行，同位角相等' }] },
                        { text: '∵∠B=78°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠DEC=78°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] }
                    ],
                    options: [
                        '已知',
                        '两直线平行，同位角相等',
                        '等量代换',
                        '三角形的一个外角等于和它不相邻的两个内角的和',
                        '外角的定义',
                        '平行于同一条直线的两条直线互相平行'
                    ],
                    correctAnswers: [
                        '已知',
                        '两直线平行，同位角相等',
                        '已知',
                        '等量代换'
                    ]
                },
                {
                    id: 'oneeighty_002',
                    title: '180°系列转角第二题',
                    description: '如图，直线AB∥DE，∠1=55°，∠2=65°，求∠C的度数．',
                    imageUrl: './0402.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 180°系列转角第二题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，直线AB∥DE，∠1=55°，∠2=65°', blanks: null },
                        { text: '解：如图', blanks: null },
                        { text: '∵AB∥DE（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∵∠1=55°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∠1=∠3（__BLANK_0__）', blanks: [{ text: '　　', correct: '对顶角相等' }] },
                        { text: '∴∠3=55°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '∴∠C=180°-∠3-∠4=180°-55°-65°=60°（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的内角和等于180°' }] }
                    ],
                    options: [
                        '已知',
                        '对顶角相等',
                        '等量代换',
                        '三角形的内角和等于180°',
                        '两直线平行，同位角相等',
                        '外角的定义'
                    ],
                    correctAnswers: [
                        '已知',
                        '已知',
                        '对顶角相等',
                        '等量代换',
                        '三角形的内角和等于180°'
                    ]
                },
                {
                    id: 'oneeighty_003',
                    title: '180°系列转角第三题',
                    description: '已知：如图，在△ABC中，∠EFB+∠ADC=180°，∠1=∠2． 求证：AB∥DG．',
                    imageUrl: './0403.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 180°系列转角第三题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，在△ABC中，∠EFB+∠ADC=180°，∠1=∠2．', blanks: null },
                        { text: '证明：如图', blanks: null },
                        { text: '∵∠EFB+∠ADC=180°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∠ADB+∠ADC=180°（__BLANK_0__）', blanks: [{ text: '　　', correct: '平角的定义' }] },
                        { text: '∴∠EFB=∠ADB（__BLANK_0__）', blanks: [{ text: '　　', correct: '同角或等角的补角相等' }] },
                        { text: '∴EF∥AD（__BLANK_0__）', blanks: [{ text: '　　', correct: '同位角相等，两直线平行' }] },
                        { text: '∴∠1=∠BAD（__BLANK_0__）', blanks: [{ text: '　　', correct: '两直线平行，同位角相等' }] },
                        { text: '∵∠1=∠2（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠2=∠BAD（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '∴AB∥DG（__BLANK_0__）', blanks: [{ text: '　　', correct: '内错角相等，两直线平行' }] }
                    ],
                    options: [
                        '已知',
                        '平角的定义',
                        '同角或等角的补角相等',
                        '同位角相等，两直线平行',
                        '两直线平行，同位角相等',
                        '等量代换',
                        '内错角相等，两直线平行'
                    ],
                    correctAnswers: [
                        '已知',
                        '平角的定义',
                        '同角或等角的补角相等',
                        '同位角相等，两直线平行',
                        '两直线平行，同位角相等',
                        '已知',
                        '等量代换',
                        '内错角相等，两直线平行'
                    ]
                },
                {
                    id: 'oneeighty_004',
                    title: '180°系列转角第四题',
                    description: '如图，在△ABC中，∠A=50°，∠BCD=30°，∠B=∠1，求∠2的度数．',
                    imageUrl: './0404.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 180°系列转角第四题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，在△ABC中，∠A=50°，∠BCD=30°，∠B=∠1', blanks: null },
                        { text: '解：如图，设∠B=α', blanks: null },
                        { text: '∵∠B=∠1（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠1=α（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '∵∠2是△BCD的一个外角（__BLANK_0__）', blanks: [{ text: '　　', correct: '外角的定义' }] },
                        { text: '∴∠2=∠B+∠BCD（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的一个外角等于和它不相邻的两个内角的和' }] },
                        { text: '∵∠BCD=30°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠2=α+30°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '∵∠A=50°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴50°+α+α+30°=180°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '∴α=50°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等式的性质' }] },
                        { text: '∴∠2=α+30°=80°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等式的性质' }] }
                    ],
                    options: [
                        '已知',
                        '等量代换',
                        '外角的定义',
                        '三角形的一个外角等于和它不相邻的两个内角的和',
                        '等式的性质'
                    ],
                    correctAnswers: [
                        '已知',
                        '等量代换',
                        '外角的定义',
                        '三角形的一个外角等于和它不相邻的两个内角的和',
                        '已知',
                        '等量代换',
                        '已知',
                        '等量代换',
                        '等式的性质',
                        '等式的性质'
                    ]
                },
                {
                    id: 'oneeighty_005',
                    title: '180°系列转角第五题',
                    description: '如图，已知DE∥BC，EF∥AB，∠DEF=50°，∠C=70°，求∠A的度数．',
                    imageUrl: './0405.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 180°系列转角第五题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，DE∥BC，EF∥AB，∠DEF=50°，∠C=70°', blanks: null },
                        { text: '解：如图', blanks: null },
                        { text: '∵DE∥BC（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠DEF=∠1（__BLANK_0__）', blanks: [{ text: '　　', correct: '两直线平行，内错角相等' }] },
                        { text: '∵∠C=70°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠A=180°-∠B-∠C=180°-50°-70°=60°（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的内角和等于180°' }] }
                    ],
                    options: [
                        '已知',
                        '两直线平行，内错角相等',
                        '三角形的内角和等于180°',
                        '等量代换',
                        '外角的定义'
                    ],
                    correctAnswers: [
                        '已知',
                        '两直线平行，内错角相等',
                        '已知',
                        '三角形的内角和等于180°'
                    ]
                },
                {
                    id: 'oneeighty_006',
                    title: '180°系列转角第六题',
                    description: '已知：如图，AB∥CD，AG∥DF，AG与CF交于点E，∠A=60°，∠C=20°，求∠F的度数．',
                    imageUrl: './0406.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 180°系列转角第六题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，AB∥CD，AG∥DF，AG与CF交于点E，∠A=60°，∠C=20°', blanks: null },
                        { text: '解：如图', blanks: null },
                        { text: '∵AB∥CD（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠1=∠A（__BLANK_0__）', blanks: [{ text: '　　', correct: '两直线平行，内错角相等' }] },
                        { text: '∵∠A=60°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠1=60°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '∵∠C=20°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠2=180°-∠1-∠C=180°-60°-20°=100°（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的内角和等于180°' }] },
                        { text: '∵AG∥DF（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠F=∠2=100°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] }
                    ],
                    options: [
                        '已知',
                        '等量代换',
                        '两直线平行，内错角相等',
                        '三角形的内角和等于180°',
                        '外角的定义'
                    ],
                    correctAnswers: [
                            '已知',
                            '两直线平行，内错角相等',
                            '已知',
                            '等量代换',
                            '已知',
                            '三角形的内角和等于180°',
                            '已知',
                            '等量代换'
                    ]
                },
                {
                    id: 'oneeighty_007',
                    title: '180°系列转角第七题',
                    description: '如图，AB∥CD，BO平分∠ABC，DO平分∠ADC，∠A=28°，∠C=40°，则∠O的度数为（ ）',
                    imageUrl: './0407.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 180°系列转角第七题示意图 --></svg>',
                    steps: [
                        { text: 'AB∥CD（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠A=∠ADC，∠C=∠ABC（__BLANK_0__）', blanks: [{ text: '　　', correct: '两直线平行，内错角相等' }] },
                        { text: '∠A=28°，∠C=40°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠ADC=28°，∠ABC=40°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: 'BO平分∠ABC，DO平分∠ADC（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∠1=1/2∠ABC=20°（__BLANK_0__）', blanks: [{ text: '　　', correct: '角平分线的定义' }] },
                        { text: '∠2=1/2∠ADC=14°（__BLANK_0__）', blanks: [{ text: '　　', correct: '角平分线的定义' }] },
                        { text: '∠ANB=180°-∠A-∠1=180°-28°-20°=132°（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的内角和等于180°' }] },
                        { text: '∠DNO=∠ANB（__BLANK_0__）', blanks: [{ text: '　　', correct: '对顶角相等' }] },
                        { text: '∴∠DNO=132°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '∠O=180°-∠DNO-∠2=180°-132°-14°=34°（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的内角和等于180°' }] }
                    ],
                    options: [
                        '已知',
                        '两直线平行，内错角相等',
                        '等量代换',
                        '角平分线的定义',
                        '三角形的内角和等于180°',
                        '对顶角相等'
                    ],
                    correctAnswers: [
                        '已知',
                        '两直线平行，内错角相等',
                        '已知',
                        '等量代换',
                        '已知',
                        '角平分线的定义',
                        '角平分线的定义',
                        '三角形的内角和等于180°',
                        '对顶角相等',
                        '等量代换',
                        '三角形的内角和等于180°'
                    ]
                }
            ],
            mutual: [
                {
                    id: 'mutual_001',
                    title: '互余互补内角和第一题',
                    description: '已知：如图，AB与CD交于点E，连接BC，∠1=75°，∠C=50°，求∠B的度数．',
                    imageUrl: './0501.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 互余互补内角和第一题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，AB与CD交于点E，连接BC，∠1=75°，∠C=50°', blanks: null },
                        { text: '解：如图', blanks: null },
                        { text: '∵∠1=75°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∠CEB=∠1（__BLANK_0__）', blanks: [{ text: '　　', correct: '对顶角相等' }] },
                        { text: '∴∠CEB=75°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '在△ECB中，∠CEB=75°，∠C=50°', blanks: null },
                        { text: '∴∠B=180°-∠CEB-∠C=180°-75°-50°=55°（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的内角和等于180°' }] }
                    ],
                    options: [
                        '已知',
                        '对顶角相等',
                        '等量代换',
                        '三角形的内角和等于180°'
                    ],
                    correctAnswers: [
                        '已知',
                        '对顶角相等',
                        '等量代换',
                        '三角形的内角和等于180°'
                    ]
                },
                {
                    id: 'mutual_002',
                    title: '互余互补内角和第二题',
                    description: '如图，在△ABC中，AD平分∠BAC，∠B=67°，∠C=33°，求∠CAD的度数。',
                    imageUrl: './0502.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 互余互补内角和第二题示意图 --></svg>',
                    steps: [
                        { text: '如图，在△ABC中，∠B=67°，∠C=33°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠BAC=180°-∠B-∠C=180°-67°-33°=80°（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的内角和等于180°' }] },
                        { text: 'AD平分∠BAC（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠CAD=1/2∠BAC=1/2×80°=40°（__BLANK_0__）', blanks: [{ text: '　　', correct: '角平分线的定义' }] }
                    ],
                    options: [
                        '已知',
                        '三角形的内角和等于180°',
                        '角平分线的定义'
                    ],
                    correctAnswers: [
                        '已知',
                        '三角形的内角和等于180°',
                        '已知',
                        '角平分线的定义'
                    ]
                },
                {
                    id: 'mutual_003',
                    title: '互余互补内角和第三题',
                    description: '已知：如图，在△ABC中，AD平分∠BAC，∠B=40°，∠BAD=30°，求∠C的度数．',
                    imageUrl: './0503.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 互余互补内角和第三题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，在△ABC中，AD平分∠BAC，∠B=40°，∠BAD=30°', blanks: null },
                        { text: '解：如图', blanks: null },
                        { text: '∵AD平分∠BAC（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠BAC=2∠BAD（__BLANK_0__）', blanks: [{ text: '　　', correct: '角平分线的定义' }] },
                        { text: '∵∠BAD=30°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠BAC=2×30°=60°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] },
                        { text: '在△ABC中，∠BAC=60°，∠B=40°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠C=180°-∠BAC-∠B=180°-60°-40°=80°（__BLANK_0__）', blanks: [{ text: '　　', correct: '三角形的内角和等于180°' }] }
                    ],
                    options: [
                        '已知',
                        '角平分线的定义',
                        '等量代换',
                        '三角形的内角和等于180°'
                    ],
                    correctAnswers: [
                        '已知',
                        '角平分线的定义',
                        '已知',
                        '等量代换',
                        '已知',
                        '三角形的内角和等于180°'
                    ]
                },
                {
                    id: 'mutual_004',
                    title: '互余互补内角和第四题',
                    description: '已知：如图，在△ABC中，∠B=90°，∠C=30°，AD平分∠BAC． 求证：∠C=∠CAD．',
                    imageUrl: './0504.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 互余互补内角和第四题示意图 --></svg>',
                    steps: [
                        { text: '∵∠B=90°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠C+∠BAC=90°（__BLANK_0__）', blanks: [{ text: '　　', correct: '直角三角形两锐角互余' }] },
                        { text: '∵∠C=30°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠BAC=90°-∠C=90°-30°=60°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等式性质' }] },
                        { text: '∵AD平分∠BAC（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠CAD=1/2∠BAC=30°（__BLANK_0__）', blanks: [{ text: '　　', correct: '角平分线的定义' }] },
                        { text: '∴∠C=∠CAD（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] }
                    ],
                    options: [
                        '已知',
                        '直角三角形两锐角互余',
                        '等式性质',
                        '角平分线的定义',
                        '等量代换'
                    ],
                    correctAnswers: [
                        '已知',
                        '直角三角形两锐角互余',
                        '已知',
                        '等式性质',
                        '已知',
                        '角平分线的定义',
                        '等量代换'
                    ]
                },
                {
                    id: 'mutual_005',
                    title: '互余互补内角和第五题',
                    description: '已知：如图，AB⊥DC，DE⊥AC，垂足分别为B，E． 求证：∠A=∠D．',
                    imageUrl: './0505.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 互余互补内角和第五题示意图 --></svg>',
                    steps: [
                        { text: '∵AB⊥DC（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠ABC=90°（__BLANK_0__）', blanks: [{ text: '　　', correct: '垂直的定义' }] },
                        { text: '∴∠A+∠C=90°（__BLANK_0__）', blanks: [{ text: '　　', correct: '直角三角形两锐角互余' }] },
                        { text: '∵DE⊥AC（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠DEC=90°（__BLANK_0__）', blanks: [{ text: '　　', correct: '垂直的定义' }] },
                        { text: '∴∠D+∠C=90°（__BLANK_0__）', blanks: [{ text: '　　', correct: '直角三角形两锐角互余' }] },
                        { text: '∴∠A=∠D（__BLANK_0__）', blanks: [{ text: '　　', correct: '同角的余角相等' }] }
                    ],
                    options: [
                        '已知',
                        '垂直的定义',
                        '直角三角形两锐角互余',
                        '同角的余角相等'
                    ],
                    correctAnswers: [
                        '已知',
                        '垂直的定义',
                        '直角三角形两锐角互余',
                        '已知',
                        '垂直的定义',
                        '直角三角形两锐角互余',
                        '同角的余角相等'
                    ]
                },
                {
                    id: 'mutual_006',
                    title: '互余互补内角和第六题',
                    description: '如图，已知∠C=90°，∠A=35°，BOA与COD为对顶角，求∠D的度数。',
                    imageUrl: './0506.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 互余互补内角和第六题示意图 --></svg>',
                    steps: [
                        { text: '∵∠C=90°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠D+∠COD=90°（__BLANK_0__）', blanks: [{ text: '　　', correct: '直角三角形两锐角互余' }] },
                        { text: '∵∠BOA=∠COD（__BLANK_0__）', blanks: [{ text: '　　', correct: '对顶角相等' }] },
                        { text: '∴∠A=∠D（__BLANK_0__）', blanks: [{ text: '　　', correct: '等角的余角相等' }] },
                        { text: '∵∠A=35°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∴∠D=35°（__BLANK_0__）', blanks: [{ text: '　　', correct: '等量代换' }] }
                    ],
                    options: [
                        '已知',
                        '直角三角形两锐角互余',
                        '对顶角相等',
                        '等角的余角相等',
                        '等量代换'
                    ],
                    correctAnswers: [
                        '已知',
                        '直角三角形两锐角互余',
                        '对顶角相等',
                        '等角的余角相等',
                        '已知',
                        '等量代换'
                    ]
                },
                {
                    id: 'mutual_007',
                    title: '互余互补内角和第七题',
                    description: '已知：如图，AB与CD交于点O，∠1+∠B=180°． 求证：CD∥EB．',
                    imageUrl: './0507.png',
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 互余互补内角和第七题示意图 --></svg>',
                    steps: [
                        { text: '已知：如图，AB与CD交于点O，∠1+∠B=180°', blanks: null },
                        { text: '∵∠1+∠B=180°（__BLANK_0__）', blanks: [{ text: '　　', correct: '已知' }] },
                        { text: '∠1+∠DOB=180°（__BLANK_0__）', blanks: [{ text: '　　', correct: '平角的定义' }] },
                        { text: '∴∠B=∠DOB（__BLANK_0__）', blanks: [{ text: '　　', correct: '同角的补角相等' }] },
                        { text: '∴CD∥EB（__BLANK_0__）', blanks: [{ text: '　　', correct: '内错角相等，两直线平行' }] }
                    ],
                    options: [
                        '已知',
                        '平角的定义',
                        '同角的补角相等',
                        '内错角相等，两直线平行'
                    ],
                    correctAnswers: [
                        '已知',
                        '平角的定义',
                        '同角的补角相等',
                        '内错角相等，两直线平行'
                    ]
                },
            ],
            parallel: [
                {
                    id: 'parallel_001',
                    title: '平行线的性质',
                    description: '如图，AB∥CD，∠ABE=140°，则∠C的度数为( )',
                    imageUrl: '',
                    svg: `<svg width="400" height="200" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
  <style>
    .line {
      stroke: black;
      stroke-width: 2.5;
    }
    .label {
      font-family: serif;
      font-size: 24px;
      fill: black;
      text-anchor: middle;
    }
  </style>

  <line class="line" x1="0" y1="50" x2="251" y2="50" />

  <line class="line" x1="150" y1="150" x2="400" y2="150" />
  
  <line class="line" x1="150" y1="150" x2="275" y2="25" />

  <text class="label" x="50" y="45">A</text>
  <text class="label" x="265" y="70">B</text>
  <text class="label" x="140" y="165">C</text>
  <text class="label" x="350" y="165">D</text>
  <text class="label" x="285" y="25">E</text>

</svg>`,
                    steps: [
                        { text: '∵ ∠ABE = 140°（__BLANK_0__）', blanks: [{ text: "　　", correct: "已知" }] },
                        { text: '∴ ∠ABC = 180° - 140° = 40°（__BLANK_0__）', blanks: [{ text: "　　", correct: "平角的定义" }] },
                        { text: '∵ AB∥CD（__BLANK_0__）', blanks: [{ text: "　　", correct: "已知" }] },
                        { text: '∴ ∠C = ∠ABC（__BLANK_0__）', blanks: [{ text: "　　", correct: "两直线平行，内错角相等" }] },
                        { text: '∴ ∠C = 40°（__BLANK_0__）', blanks: [{ text: "　　", correct: "等量代换" }] }
                    ],
                    options: [
                        '已知',
                        '平角的定义',
                        '两直线平行，内错角相等',
                        '等量代换'
                    ],
                    correctAnswers: [
                        '已知',
                        '平角的定义',
                        '已知',
                        '两直线平行，内错角相等',
                        '等量代换'
                    ]
                },
                {
                    id: 'parallel_002',
                    title: '平行线的判定与性质',
                    description: '如图, AB∥CD, AD平分∠BAC, 若∠BAD=70°, 那么∠ACD的度数为( )',
                    imageUrl: '',
                    svg: '<svg width="400" height="220" viewBox="0 0 400 220" xmlns="http://www.w3.org/2000/svg">\n  <style>\n    .line {\n      stroke: black;\n      stroke-width: 2;\n    }\n    .label {\n      font-family: sans-serif;\n      font-size: 18px;\n      fill: black;\n    }\n  </style>\n\n  <line class="line" x1="0" y1="50" x2="400" y2="50" />\n\n  <line class="line" x1="0" y1="150" x2="400" y2="150" />\n\n  <line class="line" x1="175" y1="0" x2="75" y2="200" />\n\n  <line class="line" x1="150" y1="50" x2="300" y2="200" />\n\n  <path d="M 120 150 A 20 20 0 0 0 108.9 132.1" fill="none" stroke="black" stroke-width="1.5"/>\n\n  <text x="160" y="48" class="label">A</text>\n  <text x="350" y="48" class="label">B</text>\n  <text x="85" y="145" class="label">C</text>\n  <text x="255" y="145" class="label">D</text>\n  <text x="122" y="140" class="label">1</text>\n\n</svg>',
                    steps: [
                        { text: '∵ AD平分∠BAC（__BLANK_0__）', blanks: [{ text: "　　", correct: "已知" }] },
                        { text: '∴ ∠BAC = 2∠BAD（__BLANK_0__）', blanks: [{ text: "　　", correct: "角平分线的定义" }] },
                        { text: '∵ ∠BAD = 70°（__BLANK_0__）', blanks: [{ text: "　　", correct: "已知" }] },
                        { text: '∴ ∠BAC = 2 × 70° = 140°（__BLANK_0__）', blanks: [{ text: "　　", correct: "等量代换" }] },
                        { text: '∵ AB∥CD（__BLANK_0__）', blanks: [{ text: "　　", correct: "已知" }] },
                        { text: '∴ ∠ACD + ∠BAC = 180°（__BLANK_0__）', blanks: [{ text: "　　", correct: "两直线平行，同旁内角互补" }] },
                        { text: '∴ ∠ACD = 180° - 140° = 40°（__BLANK_0__）', blanks: [{ text: "　　", correct: "等式的性质" }] }
                    ],
                    options: [
                        '已知',
                        '角平分线的定义',
                        '等量代换',
                        '两直线平行，同旁内角互补',
                        '等式的性质'
                    ],
                    correctAnswers: [
                        '已知',
                        '角平分线的定义',
                        '已知',
                        '等量代换',
                        '已知',
                        '两直线平行，同旁内角互补',
                        '等式的性质'
                    ]
                },
                {
                    id: 'parallel_003',
                    title: '平行线的性质',
                    description: '如图, 若 AB∥EF, 请根据平行线的性质，完成下面的填空。',

                    svg: '<svg width="400" height="220" viewBox="0 0 400 220" xmlns="http://www.w3.org/2000/svg">\n  <style>\n    .line { stroke: #2196F3; stroke-width: 2; vector-effect: non-scaling-stroke; }\n    .point-dot { fill: #4CAF50; }\n    .label { font-family: Arial, sans-serif; font-size: 16px; fill: #666; font-weight: bold; }\n  </style>\n  <g id="shapeGroup">\n    <line class="line" x1="200" y1="20" x2="20" y2="180" />\n    <line class="line" x1="20" y1="180" x2="340" y2="180" />\n    <line class="line" x1="340" y1="180" x2="200" y2="20" />\n    <line class="line" x1="128" y1="84" x2="256" y2="84" />\n    <line class="line" x1="256" y1="84" x2="148" y2="180" />\n    <line class="line" x1="148" y1="180" x2="128" y2="84" />\n  </g>\n  <g id="pointsGroup">\n    <circle class="point-dot" cx="200" cy="20" r="4" />\n    <circle class="point-dot" cx="20" cy="180" r="4" />\n    <circle class="point-dot" cx="340" cy="180" r="4" />\n    <circle class="point-dot" cx="128" cy="84" r="4" />\n    <circle class="point-dot" cx="256" cy="84" r="4" />\n    <circle class="point-dot" cx="148" cy="180" r="4" />\n  </g>\n  <g id="markersGroup">\n    <text x="200" y="15" class="label">A</text>\n    <text x="5" y="185" class="label">B</text>\n    <text x="345" y="185" class="label">C</text>\n    <text x="115" y="75" class="label">D</text>\n    <text x="260" y="75" class="label">E</text>\n    <text x="143" y="200" class="label">F</text>\n  </g>\n</svg>',
                    steps: [
                        { text: '∵ AB∥EF（__BLANK_0__）', blanks: [{ text: '___', correct: '已知'}] },
                        { text: '∴ ∠ADE = ∠DEF（__BLANK_0__）', blanks: [{ text: '___', correct: '两直线平行，内错角相等'}] }
                    ],
                    options: [
                        '已知', 
                        '两直线平行，内错角相等', 
                        '两直线平行，同位角相等', 
                        '内错角相等，两直线平行', 
                    ],
                    correctAnswers: [
                        '已知', 
                        '两直线平行，内错角相等'
                    ]
                },
                {
                    id: 'parallel_004',
                    title: '平行线的性质判定',
                    description: '如图，下列推理及所注明的理由都正确的是( )',
                    imageUrl: '',
                    svg: `<svg width="500" height="300" viewBox="0 0 500 300" xmlns="http://www.w3.org/2000/svg">
  <style>
    .line {
      stroke: black;
      stroke-width: 2;
      fill: none;
    }
    .label {
      font-family: serif;
      font-size: 20px;
      fill: black;
      text-anchor: middle;
    }
    .angle-arc {
        stroke: black;
        stroke-width: 1.5;
        fill: none;
    }
  </style>

  <line class="line" x1="0" y1="50" x2="500" y2="50" />
  <line class="line" x1="0" y1="250" x2="500" y2="250" />

  <line class="line" x1="100" y1="50" x2="300" y2="250" /> <line class="line" x1="100" y1="50" x2="350" y2="120" /> <line class="line" x1="350" y1="120" x2="150" y2="180" /> <line class="line" x1="150" y1="180" x2="300" y2="250" /> <path class="angle-arc" d="M 125 50 A 25 25 0 0 1 124.1 56.8" />
  <path class="angle-arc" d="M 124.1 56.8 A 25 25 0 0 1 117.7 67.7" />
  <path class="angle-arc" d="M 282.3 232.3 A 25 25 0 0 0 277.4 239.5" />
  <path class="angle-arc" d="M 275 250 A 25 25 0 0 1 277.4 239.5" />
  
  <text class="label" x="90" y="45">A</text>
  <text class="label" x="480" y="45">B</text>
  <text class="label" x="305" y="272">C</text>
  <text class="label" x="20" y="272">D</text>
  <text class="label" x="480" y="272">G</text>
  <text class="label" x="365" y="120">E</text>
  <text class="label" x="140" y="175">F</text>
  
  <text class="label" x="155" y="65">1</text>
  <text class="label" x="140" y="80">3</text>
  <text class="label" x="255" y="225">4</text>
  <text class="label" x="252" y="245">2</text>

</svg>`,
                    steps: [
                         { text: '若AB∥DG，则∠BAC=∠DCA，理由是（__BLANK_0__）', blanks: [{ text: "___", correct: "两直线平行，内错角相等" }] },
                         { text: '若AE∥CF，则∠3=∠4，理由是（__BLANK_0__）', blanks: [{ text: "___", correct: "两直线平行，内错角相等" }] },
                         { text: '若AE∥CF，则∠E=∠F，理由是（__BLANK_0__）', blanks: [{ text: "___", correct: "两直线平行，同位角相等" }] }
                    ],
                    options: [
                        '两直线平行，内错角相等',
                        '两直线平行，同位角相等',
                        '内错角相等，两直线平行',
                        '同旁内角互补，两直线平行',
                        '对顶角相等'
                    ],
                    correctAnswers: [
                        '两直线平行，内错角相等',
                        '两直线平行，内错角相等',
                        '两直线平行，同位角相等'
                    ]
                }
            ]
        };
        
        // 题目管理器
        const QuestionManager = {
            // 添加新题目到指定分类
            addQuestion: function(category, questionData) {
                if (!questionDatabase[category]) {
                    questionDatabase[category] = [];
                }
                questionDatabase[category].push(questionData);
                console.log(`题目 ${questionData.id} 已添加到 ${category} 分类`);
            },
            
            // 获取指定分类的题目数量
            getQuestionCount: function(category) {
                if (category === 'all') {
                    let total = 0;
                    Object.keys(questionDatabase).forEach(cat => {
                        total += questionDatabase[cat].length;
                    });
                    return total;
                }
                return questionDatabase[category] ? questionDatabase[category].length : 0;
            },
            
            // 获取所有分类的题目统计
            getStatistics: function() {
                const stats = {};
                Object.keys(questionDatabase).forEach(category => {
                    stats[category] = questionDatabase[category].length;
                });
                stats.total = this.getQuestionCount('all');
                return stats;
            },
            
            // 删除题目
            removeQuestion: function(category, questionId) {
                if (questionDatabase[category]) {
                    const index = questionDatabase[category].findIndex(q => q.id === questionId);
                    if (index !== -1) {
                        questionDatabase[category].splice(index, 1);
                        console.log(`题目 ${questionId} 已从 ${category} 分类中删除`);
                        return true;
                    }
                }
                return false;
            },
            
            // 根据ID查找题目
            findQuestion: function(questionId) {
                for (const category in questionDatabase) {
                    const question = questionDatabase[category].find(q => q.id === questionId);
                    if (question) {
                        return { category, question };
                    }
                }
                return null;
            }
        };
        
        // 题目模板生成器
        const QuestionTemplate = {
            // 创建新题目的模板
            createTemplate: function(id, title, category) {
                return {
                    id: id,
                    title: title,
                    description: '请填写题目描述',
                    imageUrl: '', // 可选：题目图片地址
                    svg: '<svg width="300" height="200" xmlns="http://www.w3.org/2000/svg"><!-- 请绘制SVG图形 --></svg>',
                    steps: [
                        { text: "已知：请填写已知条件", blanks: null },
                        { text: "请填写证明步骤（__BLANK_0__）", blanks: [{ text: "(　　)", correct: "请填写正确答案" }] }
                    ],
                    options: ["选项1", "选项2", "选项3", "选项4", "选项5", "选项6"],
                    correctAnswers: ["请填写正确答案序列"]
                };
            }
        };
        
        // 初始化
        document.addEventListener("DOMContentLoaded", () => {
            // 更新页面标题元素
            document.getElementById('exerciseTypeTitle').textContent = exerciseType;
            
            // 初始化页面
            updateTimerButtons();
            updateCategoryButtonsWithCount();
            // 设置默认分类为角度证明
            currentCategory = 'angle';
            // 显示一个示例题目
            displaySampleQuestion();
        });
        
        function updateCategoryButtonsWithCount() {
            // 更新分类按钮显示题目数量
            // 先清空原有分类按钮
            const categoryButtonsContainer = document.querySelector('.category-buttons');
            categoryButtonsContainer.innerHTML = '';

            // 分类中文名映射对象，便于扩展
            const categoryDisplayNameMap = {
                angle: '角度证明',
                basic: '确的辅助线证明',
                rightangle: '90°系列转角',
                // 以后只需在这里添加新分类
                triangle: '三角形专题',
                circle: '圆专题',
                oneeighty: '180°系列转角',
                mutual: '互余互补内角和',
                parallel: '平行线的性质与判定'
            };

            // 遍历所有分类，动态生成按钮
            Object.keys(questionDatabase).forEach(category => {
                let displayName = categoryDisplayNameMap[category] || category;
                const btn = document.createElement('button');
                btn.id = `category-${category}`;
                btn.className = 'category-btn';
                btn.textContent = `${displayName} (${QuestionManager.getQuestionCount(category)})`;
                btn.onclick = () => setCategory(category);
                categoryButtonsContainer.appendChild(btn);
            });

            // 保持"预览所有题目"按钮
            const previewBtn = document.createElement('button');
            previewBtn.id = 'previewAllBtn';
            previewBtn.className = 'category-btn';
            previewBtn.textContent = '预览所有题目';
            previewBtn.onclick = previewAllQuestions;
            categoryButtonsContainer.appendChild(previewBtn);
        }

        function setTimerMode(mode) {
            timerMode = mode;
            switch(mode) {
                case 'five-min':
                    timeLimit = 5 * 60; // 5分钟 = 300秒
                    break;
                case 'ten-min':
                    timeLimit = 10 * 60; // 10分钟 = 600秒
                    break;
                default:
                    timeLimit = 0; // 无限时间
            }
            updateTimerButtons();
        }

        function updateTimerButtons() {
            document.querySelectorAll('.timer-btn').forEach(btn => {
                btn.style.backgroundColor = '#007bff';
            });
            
            if (timerMode !== 'no-limit') {
                document.getElementById(`${timerMode}-btn`).style.backgroundColor = '#28a745';
            } else {
                document.getElementById('no-limit-btn').style.backgroundColor = '#28a745';
            }
        }

        function setCategory(category) {
            currentCategory = category;
            updateCategoryButtons();
            // 如果游戏未进行，更新示例题目
            if (!gameInProgress) {
                displaySampleQuestion(currentCategory);
            }
            // 高亮当前分类按钮（练习时也高亮）
            document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
            const btn = document.getElementById(`category-${currentCategory}`);
            if (btn) btn.classList.add('active');
        }

        function updateCategoryButtons() {
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`category-${currentCategory}`).classList.add('active');
        }

        function startGame() {
            // 重置状态
            playerCorrectCount = 0;
            playerIncorrectCount = 0;
            playerTotalCount = 0;
            consecutiveCorrectCount = 0;
            playerTime = 0;
            
            // 设置剩余时间
            remainingTime = timeLimit;
            
            // 更新UI
            document.getElementById('playerScore').innerHTML = `正确: 0 | 错误: 0 | 连续答对: 0 | 总题数: 0`;
            document.getElementById('playerTimer').innerHTML = `时间: 0秒`;
            document.getElementById('history').innerHTML = '';
            document.getElementById('gameEndMessage').style.display = 'none';
            
            // 显示或隐藏倒计时
            if (timerMode !== 'no-limit') {
                document.getElementById('countdownTimer').style.display = 'block';
                updateCountdownDisplay();
            } else {
                document.getElementById('countdownTimer').style.display = 'none';
            }
            
            // 启用/禁用相关按钮
            document.getElementById('startGameBtn').disabled = true;
            document.getElementById('resetGameBtn').disabled = false;
            document.getElementById('playerSubmitBtn').disabled = false;
            document.querySelectorAll('.timer-btn').forEach(btn => btn.disabled = true);
            // 分类按钮处理：只禁用非当前分类按钮，当前分类按钮高亮且可见
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.disabled = false;
                btn.classList.remove('active');
            });
            const btn = document.getElementById(`category-${currentCategory}`);
            if (btn) {
                btn.classList.add('active');
                btn.disabled = false;
            }
            document.querySelectorAll('.category-btn').forEach(btn => {
                if (!btn.classList.contains('active') && btn.id !== 'previewAllBtn') {
                    btn.disabled = true;
                }
            });
            
            // 更改游戏状态
            gameInProgress = true;
            
            // 为玩家生成题目
            generatePlayerQuestion();
            
            // 开始计时器
            startTimers();
        }
        
        function resetGame() {
            // 停止计时器
            clearInterval(playerTimer);
            if (countdownTimer) clearInterval(countdownTimer);
            
            // 重置状态
            gameInProgress = false;
            
            // 重置几何证明相关状态
            selectedBlank = null;
            userAnswers = {};
            usedOptions = new Set();
            reusableOptions = new Set();
            
            // 更新UI
            // 显示示例题目，而不是清空题目区域
            displaySampleQuestion();
            document.getElementById('proofSteps').innerHTML = '';
            document.getElementById('optionsContainer').innerHTML = '';
            document.getElementById('playerResult').innerHTML = '';
            document.getElementById('countdownTimer').style.display = 'none';
            document.getElementById('gameEndMessage').style.display = 'none';
            
            // 启用/禁用相关按钮
            updateButtonStates();
            document.querySelectorAll('.timer-btn').forEach(btn => btn.disabled = false);
            document.querySelectorAll('.category-btn').forEach(btn => btn.disabled = false);
        }
        
        // 更新按钮状态
        function updateButtonStates() {
            document.getElementById('startGameBtn').disabled = gameInProgress;
            document.getElementById('resetGameBtn').disabled = !gameInProgress;
            document.getElementById('playerSubmitBtn').disabled = !gameInProgress;
        }
        
        function startTimers() {
            // 玩家计时器
            playerTimer = setInterval(() => {
                playerTime++;
                document.getElementById('playerTimer').innerHTML = `时间: ${playerTime}秒`;
            }, 1000);
            
            // 倒计时计时器（如果启用）
            if (timerMode !== 'no-limit') {
                countdownTimer = setInterval(() => {
                    remainingTime--;
                    updateCountdownDisplay();
                    
                    if (remainingTime <= 0) {
                        endGame("时间到");
                    }
                }, 1000);
            }
            
            // 记录开始时间
            playerQuestionStartTime = playerTime;
        }
        
        function updateCountdownDisplay() {
            const minutes = Math.floor(remainingTime / 60).toString().padStart(2, '0');
            const seconds = (remainingTime % 60).toString().padStart(2, '0');
            document.getElementById('countdownTimer').innerHTML = `剩余时间: ${minutes}:${seconds}`;
            
            // 如果时间不多了，显示红色
            if (remainingTime <= 30) {
                document.getElementById('countdownTimer').style.color = 'red';
            } else {
                document.getElementById('countdownTimer').style.color = '#007bff';
            }
        }
        
        function generatePlayerQuestion() {
            // 清空证明步骤和选项
            document.getElementById('proofSteps').innerHTML = '';
            document.getElementById('optionsContainer').innerHTML = '';
            document.getElementById('playerResult').innerHTML = '';
            
            // 重置几何证明相关状态
            selectedBlank = null;
            userAnswers = {};
            usedOptions = new Set();
            reusableOptions = new Set();
            
            // 生成新题目
            const playerQuestion = generateQuestion();
            // 保存玩家题目的正确答案
            playerCorrectAnswer = [...correctAnswer];
            
            // 更新界面上的题目
            document.getElementById('playerQuestion').innerHTML = playerQuestion;
            
            // 生成证明步骤和选项
            if (currentProofData) {
                generateProofSteps();
                generateOptions();
                
                // 自动选择第一个空白
                setTimeout(() => {
                    const firstBlank = document.querySelector('.blank-space');
                    if (firstBlank) {
                        const blankId = firstBlank.getAttribute('data-blank-id');
                        selectBlank(blankId);
                    }
                }, 100);
            }
            
            // 记录题目开始时间
            playerQuestionStartTime = playerTime;
            
            // 重新渲染数学公式
            MathJax.typesetPromise([document.getElementById('playerQuestion')])
                .catch((err) => console.log(err));
        }
        
        function checkPlayerAnswer() {
            if (!gameInProgress || !currentProofData) return;

            // 检查是否所有空白都已填写
            const totalBlanks = currentProofData.steps.reduce((total, step) => {
                return total + (step.blanks ? step.blanks.length : 0);
            }, 0);

            if (Object.keys(userAnswers).length < totalBlanks) {
                document.getElementById('playerResult').innerHTML = '<span class="incorrect">请完成所有空白填写！</span>';
                return;
            }

            const questionTime = playerTime - playerQuestionStartTime;
            
            // 检查答案是否正确
            let isCorrect = true;
            let incorrectCount = 0;
            
            // 遍历每个步骤检查答案
            currentProofData.steps.forEach((step, stepIndex) => {
                if (step.blanks) {
                    step.blanks.forEach((blank, blankIndex) => {
                        const blankId = `step${stepIndex}_blank${blankIndex}`;
                        const userAnswer = userAnswers[blankId];
                        const correctAnswer = blank.correct;
                        
                        if (userAnswer !== correctAnswer) {
                            isCorrect = false;
                            incorrectCount++;
                        }
                    });
                }
            });

            // 更新计数
            playerTotalCount++;
            if (isCorrect) {
                playerCorrectCount++;
                consecutiveCorrectCount++;
                document.getElementById('correctSound').play();
                document.getElementById('playerResult').innerHTML = '<span class="correct">回答正确！所有理由都填写正确！</span>';
                
                // 标记正确的选项
                markOptionsAsCorrect();
            } else {
                playerIncorrectCount++;
                consecutiveCorrectCount = 0;
                document.getElementById('wrongSound').play();
                document.getElementById('playerResult').innerHTML = `<span class="incorrect">有 ${incorrectCount} 个填空错误，请检查！</span>`;
                
                // 标记错误的选项
                markOptionsAsIncorrect();
            }

            // 更新分数显示
            document.getElementById('playerScore').innerHTML =
                `正确: ${playerCorrectCount} | 错误: ${playerIncorrectCount} |连续答对: ${consecutiveCorrectCount} | 总题数: ${playerTotalCount}`;

            // 生成答案字符串用于历史记录
            const answerString = generateAnswerString();
            const correctAnswerString = generateCorrectAnswerString();
            const proofProcessString = generateProofProcessString();
            const correctProofProcessString = generateCorrectProofProcessString();
            
            // 添加到历史记录
            addToHistory(
                document.getElementById('playerQuestion').innerHTML,
                proofProcessString,
                correctProofProcessString,
                isCorrect ? '正确' : '错误',
                questionTime
            );

            // 检查是否连续答对10题
            if (isCorrect && consecutiveCorrectCount >= 10) {
                endGame("连续答对10题");
                return;
            }

            // 游戏中 - 生成新题目
            if (gameInProgress) {
                setTimeout(() => {
                    if (gameInProgress) {
                        generatePlayerQuestion();
                    }
                }, 1500);
            }
        }
        
        function endGame(reason) {
            // 停止计时器
            clearInterval(playerTimer);
            if (countdownTimer) clearInterval(countdownTimer);
            
            // 更改游戏状态
            gameInProgress = false;
            
            // 禁用输入和提交按钮
            document.getElementById('playerAnswer').disabled = true;
            document.getElementById('playerSubmitBtn').disabled = true;
            
            // 显示游戏结束信息
            const gameEndMessage = document.getElementById('gameEndMessage');
            let message = '';
            
            if (reason === "连续答对10题") {
                message = `恭喜！你连续答对了10题！<br>最终成绩：答对${playerCorrectCount}题，答错${playerIncorrectCount}题，总共${playerTotalCount}题。<br>继续保持！`;
                document.getElementById('successSound').play();
            } else if (reason === "时间到") {
                message = `时间到！<br>最终成绩：答对${playerCorrectCount}题，答错${playerIncorrectCount}题，总共${playerTotalCount}题。`;
            }
            
            gameEndMessage.innerHTML = message;
            gameEndMessage.style.display = 'block';
            
            // 启用开始游戏按钮和计时器选择按钮
            document.getElementById('startGameBtn').disabled = false;
            document.querySelectorAll('.timer-btn').forEach(btn => btn.disabled = false);
        }
        
        function addToHistory(question, answer, correctAnswer, result, time) {
            const historyTable = document.getElementById('history');
            const newRow = historyTable.insertRow(0);
            
            // 设置行的类
            newRow.classList.add("player-row");
            
            // 新增题型列
            let categoryDisplay = '';
            if (currentCategory === 'angle') categoryDisplay = '角度证明';
            else if (currentCategory === 'basic') categoryDisplay = '确的辅助线证明';
            else categoryDisplay = currentCategory;
            newRow.insertCell(0).innerHTML = categoryDisplay;
            
            // 填充单元格内容
            newRow.insertCell(1).innerHTML = question;
            newRow.insertCell(2).innerHTML = '\\(' + answer + '\\)';
            newRow.insertCell(3).innerHTML = '\\(' + correctAnswer + '\\)';
            
            // 为正确和错误的结果设置不同颜色
            const resultCell = newRow.insertCell(4);
            if (result === '正确') {
                resultCell.innerHTML = `<span class="correct">${result}</span>`;
            } else {
                resultCell.innerHTML = `<span class="incorrect">${result}</span>`;
            }
            
            newRow.insertCell(5).innerHTML = time + '秒';
            
            // 重新渲染新添加的行中的数学公式
            MathJax.typesetPromise([newRow]).catch((err) => console.log(err));
        }
        
        // 几何证明相关函数
        function generateProofSteps() {
            const proofStepsContainer = document.getElementById('proofSteps');
            proofStepsContainer.innerHTML = '';
            
            currentProofData.steps.forEach((step, stepIndex) => {
                const stepDiv = document.createElement('div');
                stepDiv.className = 'proof-step';
                
                let stepContent = step.text;
                
                // 替换空白位置
                if (step.blanks) {
                    step.blanks.forEach((blank, blankIndex) => {
                        const blankId = `step${stepIndex}_blank${blankIndex}`;
                        const placeholder = `__BLANK_${blankIndex}__`;
                        stepContent = stepContent.replace(placeholder, 
                            `<span class="blank-space" data-blank-id="${blankId}" onclick="selectBlank('${blankId}')">${blank.text}</span>`
                        );
                    });
                }
                
                stepDiv.innerHTML = stepContent;
                proofStepsContainer.appendChild(stepDiv);
            });
        }
        
        function generateOptions() {
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            // 随机打乱选项顺序
            const shuffledOptions = shuffleArray(currentProofData.options);
            
            // 设置所有选项都可重复使用
            reusableOptions = new Set();
            for (let i = 0; i < shuffledOptions.length; i++) {
                reusableOptions.add(i);
            }
            
            shuffledOptions.forEach((option, index) => {
                const optionButton = document.createElement('div');
                optionButton.className = 'option-button reusable';
                optionButton.title = '此选项可以重复使用';
                
                optionButton.textContent = option;
                // 传递原始选项而不是随机后的索引，确保答案验证正确
                optionButton.onclick = () => selectOption(option, index);
                optionsContainer.appendChild(optionButton);
            });
        }
        
        function selectBlank(blankId) {
            // 移除之前选中的空白的高亮
            document.querySelectorAll('.blank-space.selected').forEach(blank => {
                blank.classList.remove('selected');
            });
            
            // 高亮当前选中的空白
            const blankElement = document.querySelector(`[data-blank-id="${blankId}"]`);
            if (blankElement) {
                blankElement.classList.add('selected');
                selectedBlank = blankId;
            }
        }
        
        function selectOption(option, optionIndex) {
            if (!selectedBlank) {
                // 如果没有选中的空白，自动选择第一个未填充的空白
                const emptyBlank = document.querySelector('.blank-space:not(.filled)');
                if (emptyBlank) {
                    const blankId = emptyBlank.getAttribute('data-blank-id');
                    selectBlank(blankId);
                } else {
                    alert('所有空白都已填写！如需修改，请先点击要修改的空白位置。');
                    return;
                }
            }
            
            // 所有选项都可以重复使用，移除使用限制检查
            
            // 检查是否已经填写过这个空白
            const currentBlankElement = document.querySelector(`[data-blank-id="${selectedBlank}"]`);
            if (currentBlankElement && currentBlankElement.classList.contains('filled')) {
                // 如果空白已填写，先清除之前的答案
                const oldAnswer = userAnswers[selectedBlank];
                if (oldAnswer) {
                    // 找到之前使用的选项并恢复可用状态
                    const allOptionButtons = document.querySelectorAll('.option-button');
                    allOptionButtons.forEach(button => {
                        if (button.textContent === oldAnswer) {
                            // 所有选项都可重复使用，只需移除reused标记
                            button.classList.remove('reused');
                        }
                    });
                }
            }
            
            // 填写答案
            userAnswers[selectedBlank] = option;
            
            // 更新空白显示
            const blankElement = document.querySelector(`[data-blank-id="${selectedBlank}"]`);
            if (blankElement) {
                blankElement.textContent = option;
                blankElement.classList.add('filled');
                blankElement.classList.remove('selected');
            }
            
            // 所有选项都可重复使用，添加已使用标记但保持可用
            const optionButtons = document.querySelectorAll('.option-button');
            optionButtons[optionIndex].classList.add('reused');
            
            // 清除选中状态
            selectedBlank = null;
            
            // 自动选择下一个未填充的空白
            const nextEmptyBlank = document.querySelector('.blank-space:not(.filled)');
            if (nextEmptyBlank) {
                const nextBlankId = nextEmptyBlank.getAttribute('data-blank-id');
                selectBlank(nextBlankId);
            }
        }
        
        function markOptionsAsCorrect() {
            document.querySelectorAll('.option-button.used').forEach(button => {
                button.classList.add('correct');
            });
        }
        
        function markOptionsAsIncorrect() {
            document.querySelectorAll('.option-button.used').forEach(button => {
                button.classList.add('incorrect');
            });
        }
        
        function generateAnswerString() {
            let answerParts = [];
            Object.keys(userAnswers).forEach(blankId => {
                answerParts.push(userAnswers[blankId]);
            });
            return answerParts.join(', ');
        }
        
        function generateCorrectAnswerString() {
            let correctParts = [];
            currentProofData.steps.forEach((step) => {
                if (step.blanks) {
                    step.blanks.forEach((blank) => {
                        correctParts.push(blank.correct);
                    });
                }
            });
            return correctParts.join(', ');
        }
        
        // 生成完整的解题过程字符串（用户的答案）
        function generateProofProcessString() {
            if (!currentProofData) return '';
            
            let processSteps = [];
            
            currentProofData.steps.forEach((step, stepIndex) => {
                let stepText = step.text;
                
                if (step.blanks) {
                    step.blanks.forEach((blank, blankIndex) => {
                        const blankId = `step${stepIndex}_blank${blankIndex}`;
                        const userAnswer = userAnswers[blankId] || '(未填写)';
                        const placeholder = `__BLANK_${blankIndex}__`;
                        stepText = stepText.replace(placeholder, `<strong style="color: #007bff;">${userAnswer}</strong>`);
                    });
                } else {
                    // 对于没有空白的步骤，添加灰色样式
                    stepText = `<span style="color: #666;">${stepText}</span>`;
                }
                
                processSteps.push(stepText);
            });
            
            return processSteps.join('<br/>');
        }
        
        // 生成完整的正确解题过程字符串
        function generateCorrectProofProcessString() {
            if (!currentProofData) return '';
            
            let processSteps = [];
            
            currentProofData.steps.forEach((step, stepIndex) => {
                let stepText = step.text;
                
                if (step.blanks) {
                    step.blanks.forEach((blank, blankIndex) => {
                        const placeholder = `__BLANK_${blankIndex}__`;
                        stepText = stepText.replace(placeholder, `<strong style="color: #28a745;">${blank.correct}</strong>`);
                    });
                } else {
                    stepText = `<span style="color: #666;">${stepText}</span>`;
                }
                
                processSteps.push(stepText);
            });
            
            return processSteps.join('<br/>');
        }
        
        function generateOptionsString() {
            if (!currentProofData || !currentProofData.options) {
                return '';
            }
            
            // 将选项以编号形式展示
            return currentProofData.options.map((option, index) => {
                return `${String.fromCharCode(65 + index)}. ${option}`;
            }).join('<br/>');
        }
        
        function copyHistory() {
            // 创建历史记录的JSON对象，把最终结果放在前面
            const historyData = {
                result: {
                    exerciseType: exerciseType,
                    consecutiveCorrect: consecutiveCorrectCount,
                    playerCorrect: playerCorrectCount,
                    playerIncorrect: playerIncorrectCount,
                    playerTotal: playerTotalCount,
                    playerScore: playerCorrectCount - playerIncorrectCount,

                },
                records: []
            };
            
            // 获取表格内容
            const rows = document.querySelectorAll('tbody tr');
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                if(cells.length >= 5) {
                    const record = {
                        question: cells[0].innerText.replace(/\\\(|\\\)/g, ''),
                        answer: cells[1].innerText.replace(/\\\(|\\\)/g, ''),
                        correctAnswer: cells[2].innerText.replace(/\\\(|\\\)/g, ''),
                        result: cells[3].innerText,
                        time: parseInt(cells[4].innerText)
                    };
                    historyData.records.push(record);
                }
            });
            
            // 转换为JSON字符串
            const jsonStr = JSON.stringify(historyData, null, 2);

            // 复制到剪贴板
            navigator.clipboard.writeText(jsonStr).then(() => {
                // 显示复制成功的提示
                const copySuccess = document.getElementById('copy-success');
                copySuccess.style.display = 'block';
                setTimeout(() => {
                    copySuccess.style.display = 'none';
                }, 2000); // 2秒后隐藏提示
            }).catch(err => {
                console.error('复制失败: ', err);
            });
        }
        
        // 图片交互功能
        function toggleImageSize(imgElement) {
            if (imgElement.style.transform === 'scale(1.5)') {
                imgElement.style.transform = 'scale(1)';
                imgElement.style.zIndex = 'auto';
                imgElement.style.position = 'relative';
            } else {
                imgElement.style.transform = 'scale(1.5)';
                imgElement.style.zIndex = '1000';
                imgElement.style.position = 'relative';
            }
        }
        
        // 开发者工具：在控制台中使用的函数
        window.addNewQuestion = function(category, questionData) {
            QuestionManager.addQuestion(category, questionData);
            updateCategoryButtonsWithCount();
            console.log("题目添加成功！当前题目统计：", QuestionManager.getStatistics());
        };
        
        window.getQuestionStats = function() {
            console.log("题目统计：", QuestionManager.getStatistics());
            return QuestionManager.getStatistics();
        };
        
        window.createQuestionTemplate = function(id, title, category) {
            const template = QuestionTemplate.createTemplate(id, title, category);
            console.log("题目模板：", template);
            return template;
        };
        
        // 题目生成函数
        function generateQuestion() {
            // 按当前分类生成题目
            return generateGeometryProofQuestion(currentCategory);
        }

        function generateGeometryProofQuestion(category) {
            // 默认分类为angle
            let cat = category || 'angle';
            let availableQuestions = questionDatabase[cat] || [];
            if (availableQuestions.length === 0) {
                return "没有可用的题目";
            }
            const randomQuestion = availableQuestions[Math.floor(Math.random() * availableQuestions.length)];
            return generateQuestionFromData(randomQuestion);
        }
        
        function generateQuestionFromData(questionData) {
            // 设置当前题目数据
            currentProofData = {
                steps: questionData.steps,
                options: questionData.options
            };
            
            // 设置正确答案
            correctAnswer = questionData.correctAnswers;
            
            // 构建图片部分HTML
            let imageHTML = '';
            if (questionData.imageUrl && questionData.imageUrl.trim() !== '') {
                imageHTML = `
                    <div class="image-container">
                        <img src="${questionData.imageUrl}" alt="题目图片" class="question-image" 
                             onclick="toggleImageSize(this)"
                             onerror="this.style.display='none'; document.getElementById('svg-fallback-${questionData.id}').style.display='block'; document.getElementById('error-msg-${questionData.id}').style.display='block';">
                        <div id="error-msg-${questionData.id}" class="image-error-message" style="display: none;">
                            图片加载失败，显示SVG备用图形
                        </div>
                    </div>
                    <div id="svg-fallback-${questionData.id}" class="svg-fallback" style="display: none;">
                        ${questionData.svg}
                        <div style="color: #666; font-size: 12px; margin-top: 10px;">SVG备用图形</div>
                    </div>
                `;
            } else {
                imageHTML = `<div style="margin: 15px 0;">${questionData.svg}</div>`;
            }
            
            // 返回题目HTML
            return `
                <div style="text-align: center;">
                    <h4>${questionData.description}</h4>
                    ${imageHTML}
                </div>
            `;
        }



        function displaySampleQuestion(category) {
            // 生成示例题目（按当前分类）
            const sampleQuestion = generateGeometryProofQuestion(category || currentCategory);
            // 更新界面上的题目，将题目包装在一个div中
            document.getElementById('playerQuestion').innerHTML = `
                <div class="question-content">${sampleQuestion}</div>
                <div class="sample-indicator" style="width: 100%; text-align: center; margin-top: 20px; color: #888; font-style: italic;">

                </div>
            `;
            // 生成示例的证明步骤和选项（但不可交互）
            if (currentProofData) {
                generateSampleProofSteps();
                generateSampleOptions();
            }
            // 重新渲染数学公式
            MathJax.typesetPromise([document.getElementById('playerQuestion')])
                .catch((err) => console.log(err));
        }

        function generateSampleProofSteps() {
            const proofStepsContainer = document.getElementById('proofSteps');
            proofStepsContainer.innerHTML = '';
            
            currentProofData.steps.forEach((step, stepIndex) => {
                const stepDiv = document.createElement('div');
                stepDiv.className = 'proof-step';
                stepDiv.style.opacity = '0.7'; // 示例样式
                
                let stepContent = step.text;
                
                // 替换空白位置（示例中显示为空白）
                if (step.blanks) {
                    step.blanks.forEach((blank, blankIndex) => {
                        const placeholder = `__BLANK_${blankIndex}__`;
                        stepContent = stepContent.replace(placeholder, 
                            `<span class="blank-space" style="cursor: not-allowed;">${blank.text}</span>`
                        );
                    });
                }
                
                stepDiv.innerHTML = stepContent;
                proofStepsContainer.appendChild(stepDiv);
            });
        }
        
        function generateSampleOptions() {
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            // 示例题目也使用随机顺序
            const shuffledOptions = shuffleArray(currentProofData.options);
            
            shuffledOptions.forEach((option, index) => {
                const optionButton = document.createElement('div');
                optionButton.className = 'option-button reusable';
                optionButton.style.opacity = '0.7'; // 示例样式
                optionButton.style.cursor = 'not-allowed';
                optionButton.title = '此选项可以重复使用';
                optionButton.textContent = option;
                optionsContainer.appendChild(optionButton);
            });
        }

        // 添加预览所有题目的函数
        function previewAllQuestions() {
            const modal = document.getElementById('previewModal');
            const previewContent = document.getElementById('previewContent');
            previewContent.innerHTML = '';

            // 遍历所有题目
            Object.keys(questionDatabase).forEach(category => {
                questionDatabase[category].forEach((question, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'preview-question';
                    
                    // 添加题目标题和描述
                    questionDiv.innerHTML = `
                        <h3>题目 ${index + 1}: ${question.title}</h3>
                        <p>${question.description}</p>
                        ${question.imageUrl ? `<img src="${question.imageUrl}" alt="题目图片" style="max-width: 300px; margin: 10px 0;">` : ''}
                        <div class="preview-steps">
                            ${question.steps.map(step => `
                                <div class="preview-step">
                                    ${step.text.replace(/__BLANK_\d+__/g, '<span style="color: #007bff;">(　　)</span>')}
                                </div>
                            `).join('')}
                        </div>
                        <div class="preview-options">
                            ${question.options.map(option => `
                                <span class="preview-option">${option}</span>
                            `).join('')}
                        </div>
                        <div class="preview-correct-answer">
                            正确答案: ${question.correctAnswers.join(' → ')}
                        </div>
                    `;
                    
                    previewContent.appendChild(questionDiv);
                });
            });

            modal.style.display = 'block';
        }

        // 关闭预览模态框
        function closePreviewModal() {
            document.getElementById('previewModal').style.display = 'none';
        }

        // 点击模态框外部关闭
        window.onclick = function(event) {
            const modal = document.getElementById('previewModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // 添加打印预览函数
        function printPreview() {
            window.print();
        }
    </script>
</body>
</html>
