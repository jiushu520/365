<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>求解 tan∠BAC之01一线三直角法</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .problem { margin-bottom: 20px; }
        .solution { margin-top: 20px; }
        svg { 
            border: 1px solid #ddd; 
            display: block;
            margin: 0 auto;
        }
        .step { margin: 10px 0; }
        .hint { color: #0066cc; font-style: italic; }
        .math { font-style: italic; }
        #controls {
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f5f5f5;
            border-radius: 5px;
            text-align: center;
        }
    </style>
    <!-- 添加MathJax支持 -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            }
        };
    </script>
</head>
<body>
    <div class="problem">
        <h2>已知：$A(0,0)$，$B(6,1)$，$C(3,6)$，求解 $\tan\angle BAC$</h2>
        
        <div id="controls">
            <label>坐标缩放: <input type="range" id="scale" min="20" max="100" value="25"></label>
            <span id="scaleValue">25</span>
        </div>
        
        <svg id="coordinate-system" width="800" height="600"></svg>
    </div>

    <div class="solution">
        <h3>一线三直角法解题</h3>
        
        <div class="step">
            <p>已知：$A(0,0)$，$B(6,1)$，$C(3,6)$</p>
            
            <p>1. 构造方程：
               <br>• 直线AB的方程：$x - 6y = 0$
               <br>• 直线AC的方程：$6x - 3y = 0$</p>
            
            <p>2. 一线三直角法的思路：
               <br>• 从点C作垂线到直线AB，垂足为T
               <br>• 构造三角形$\triangle C(\frac{144}{37},6)T$：
               <br>- 其中$C(3,6)$为给定点
               <br>- $(\frac{144}{37},6)$为垂线上的点
               <br>- $T(\frac{144}{37},\frac{24}{37})$为垂足
               <br>• 此三角形的三边分别为：
               <br>- 底边：$6-\frac{24}{37} = \frac{198}{37}$
               <br>- 高：$3-\frac{144}{37} = \frac{-33}{37}$
               <br>• 这个三角形是关键，因为它的边长比就是所求的正切值</p>
               
            <p>3. 根据图像可以看出：
               <br>• 在$\triangle CTA$中：$\tan\angle CAT = \frac{CT}{AT}$
               <br>• 其中$CT = 6 - \frac{24}{37} = \frac{198}{37}$（垂线段长度）
               <br>• $AT = \sqrt{(\frac{144}{37})^2 + (\frac{24}{37})^2} = \frac{6\sqrt{592}}{37}$（点T到原点的距离）
               <br>• 因此$\tan\angle BAC = \frac{CT}{AT} = \frac{11}{8}$</p>
               
            <p>4. 求切点T的坐标：
               <br>• 由于T在直线AB上，所以满足方程：$x - 6y = 0$
               <br>• 由于CT⊥AB，所以CT的斜率与AB垂直：$k_{CT} \cdot k_{AB} = -1$
               <br>• 解得：$T(\frac{144}{37}, \frac{24}{37})$</p>
               
            <p>5. 计算 $a$ 和 $b$：
               <br>• $a = \sqrt{(\frac{144}{37})^2 + (\frac{24}{37})^2} = \frac{6\sqrt{592}}{37}$
               <br>• $b = \frac{|x_0 - 6y_0|}{\sqrt{1 + 36}} = \frac{33}{\sqrt{37}}$，其中$(x_0,y_0)$是点C的坐标</p>
               
            <p>6. 求 $\tan\angle BAC$：
               <br>$\tan\angle BAC = \frac{b}{a} = \frac{\frac{33}{\sqrt{37}}}{\frac{6\sqrt{592}}{37}} = \frac{11}{8}$</p>
        </div>
        
        <div class="hint">
            <p>要点：</p>
            <ul>
                <li>一线三直角法利用垂线构造三个直角三角形</li>
                <li>切点到原点的距离和点到直线的距离的比值即为所求的正切值</li>
                <li>这种方法直观且易于理解</li>
                <li>适用于求解角的三角函数值的问题</li>
            </ul>
        </div>
    </div>

    <script>
        // 设置中心点和缩放比例
        const svgWidth = 800;
        const svgHeight = 600;
        const centerX = svgWidth / 2;
        const centerY = svgHeight / 2;
        let scale = 20; // 每个单位对应的像素数
        
        // 坐标点（数学坐标系中）
        const pointA = {x: 0, y: 0};
        const pointB = {x: 6, y: 1};
        const pointC = {x: 3, y: 6};
        
        // 计算切点T的坐标
        function calculateFootPoint() {
            const tX = 144 / 37;
            const tY = 24 / 37;
            return {x: tX, y: tY};
        }
        
        // 转换为SVG坐标
        function toSvgX(x) {
            return centerX + x * scale;
        }
        
        function toSvgY(y) {
            return centerY - y * scale;
        }
        
        // 创建SVG元素
        function createSVGElement(tag) {
            return document.createElementNS("http://www.w3.org/2000/svg", tag);
        }
        
        // 绘制坐标系和图形
        function drawCoordinateSystem() {
            const svg = document.getElementById('coordinate-system');
            svg.innerHTML = '';
            
            // 创建所有需要的组
            const gridGroup = createSVGElement('g');
            const axisGroup = createSVGElement('g');
            const labelsGroup = createSVGElement('g');
            const shapeGroup = createSVGElement('g');
            const pointsGroup = createSVGElement('g');
            const markersGroup = createSVGElement('g');
            const rightAnglesGroup = createSVGElement('g');
            
            gridGroup.setAttribute('stroke', '#eee');
            gridGroup.setAttribute('stroke-width', '1');
            axisGroup.setAttribute('stroke', '#999');
            axisGroup.setAttribute('stroke-width', '1');
            labelsGroup.setAttribute('font-size', '12');
            markersGroup.setAttribute('font-size', '12');
            rightAnglesGroup.setAttribute('stroke', '#00cc00');
            rightAnglesGroup.setAttribute('stroke-width', '2');
            rightAnglesGroup.setAttribute('fill', 'none');

            // 计算可见范围
            const visibleWidth = svgWidth / scale;
            const visibleHeight = svgHeight / scale;
            const xMin = -visibleWidth / 2;
            const xMax = visibleWidth / 2;
            const yMin = -visibleHeight / 2;
            const yMax = visibleHeight / 2;
            
            // 横向网格线
            for (let y = Math.floor(yMin); y <= Math.ceil(yMax); y++) {
                if (y === 0) continue;
                const line = createSVGElement('line');
                line.setAttribute('x1', toSvgX(xMin));
                line.setAttribute('y1', toSvgY(y));
                line.setAttribute('x2', toSvgX(xMax));
                line.setAttribute('y2', toSvgY(y));
                gridGroup.appendChild(line);
            }
            
            // 纵向网格线
            for (let x = Math.floor(xMin); x <= Math.ceil(xMax); x++) {
                if (x === 0) continue;
                const line = createSVGElement('line');
                line.setAttribute('x1', toSvgX(x));
                line.setAttribute('y1', toSvgY(yMin));
                line.setAttribute('x2', toSvgX(x));
                line.setAttribute('y2', toSvgY(yMax));
                gridGroup.appendChild(line);
            }
            
            // x轴
            const xAxis = createSVGElement('line');
            xAxis.setAttribute('x1', toSvgX(xMin));
            xAxis.setAttribute('y1', toSvgY(0));
            xAxis.setAttribute('x2', toSvgX(xMax));
            xAxis.setAttribute('y2', toSvgY(0));
            axisGroup.appendChild(xAxis);
            
            // y轴
            const yAxis = createSVGElement('line');
            yAxis.setAttribute('x1', toSvgX(0));
            yAxis.setAttribute('y1', toSvgY(yMin));
            yAxis.setAttribute('x2', toSvgX(0));
            yAxis.setAttribute('y2', toSvgY(yMax));
            axisGroup.appendChild(yAxis);
            
            // x轴刻度标签
            for (let x = Math.floor(xMin); x <= Math.ceil(xMax); x++) {
                if (x === 0) continue;
                const text = createSVGElement('text');
                text.setAttribute('x', toSvgX(x));
                text.setAttribute('y', toSvgY(0) + 15);
                text.setAttribute('text-anchor', 'middle');
                text.textContent = x;
                labelsGroup.appendChild(text);
            }
            
            // y轴刻度标签
            for (let y = Math.floor(yMin); y <= Math.ceil(yMax); y++) {
                if (y === 0) continue;
                const text = createSVGElement('text');
                text.setAttribute('x', toSvgX(0) - 10);
                text.setAttribute('y', toSvgY(y) + 5);
                text.setAttribute('text-anchor', 'end');
                text.textContent = y;
                labelsGroup.appendChild(text);
            }
            
            // 计算切点T
            const pointT = calculateFootPoint();
            
            // 绘制特定三角形区域
            const specificTriangle = createSVGElement('path');
            specificTriangle.setAttribute('d', `M ${toSvgX(3)} ${toSvgY(6)} 
                                             L ${toSvgX(144/37)} ${toSvgY(6)}
                                             L ${toSvgX(144/37)} ${toSvgY(24/37)}
                                             Z`);
            specificTriangle.setAttribute('fill', 'rgba(255, 165, 0, 0.3)');
            specificTriangle.setAttribute('stroke', 'orange');
            specificTriangle.setAttribute('stroke-width', '2');
            shapeGroup.appendChild(specificTriangle);

            // 绘制黄色三角形区域
            const yellowTriangle = createSVGElement('path');
            yellowTriangle.setAttribute('d', `M ${toSvgX(pointC.x)} ${toSvgY(pointC.y)} 
                                           L ${toSvgX(pointT.x)} ${toSvgY(pointT.y)}
                                           L ${toSvgX(4)} ${toSvgY(0)}
                                           Z`);
            yellowTriangle.setAttribute('fill', 'rgba(255, 255, 0, 0.2)');
            yellowTriangle.setAttribute('stroke', 'none');
            shapeGroup.appendChild(yellowTriangle);

            // 绘制绿色三角形区域
            const greenTriangle = createSVGElement('path');
            greenTriangle.setAttribute('d', `M ${toSvgX(0)} ${toSvgY(0)} 
                                          L ${toSvgX(4)} ${toSvgY(0)}
                                          L ${toSvgX(pointT.x)} ${toSvgY(pointT.y)}
                                          Z`);
            greenTriangle.setAttribute('fill', 'rgba(0, 255, 0, 0.2)');
            greenTriangle.setAttribute('stroke', 'none');
            shapeGroup.appendChild(greenTriangle);

            // 线段AB
            const lineAB = createSVGElement('line');
            lineAB.setAttribute('x1', toSvgX(pointA.x));
            lineAB.setAttribute('y1', toSvgY(pointA.y));
            lineAB.setAttribute('x2', toSvgX(pointB.x));
            lineAB.setAttribute('y2', toSvgY(pointB.y));
            lineAB.setAttribute('stroke', '#000');
            lineAB.setAttribute('stroke-width', '2');
            shapeGroup.appendChild(lineAB);
            
            // 线段AC
            const lineAC = createSVGElement('line');
            lineAC.setAttribute('x1', toSvgX(pointA.x));
            lineAC.setAttribute('y1', toSvgY(pointA.y));
            lineAC.setAttribute('x2', toSvgX(pointC.x));
            lineAC.setAttribute('y2', toSvgY(pointC.y));
            lineAC.setAttribute('stroke', '#000');
            lineAC.setAttribute('stroke-width', '2');
            shapeGroup.appendChild(lineAC);
            
            // 垂线CT
            const lineCT = createSVGElement('line');
            lineCT.setAttribute('x1', toSvgX(pointC.x));
            lineCT.setAttribute('y1', toSvgY(pointC.y));
            lineCT.setAttribute('x2', toSvgX(pointT.x));
            lineCT.setAttribute('y2', toSvgY(pointT.y));
            lineCT.setAttribute('stroke', '#00cc00');
            lineCT.setAttribute('stroke-width', '2');
            lineCT.setAttribute('stroke-dasharray', '4');
            shapeGroup.appendChild(lineCT);

            // 点A
            const circleA = createSVGElement('circle');
            circleA.setAttribute('cx', toSvgX(pointA.x));
            circleA.setAttribute('cy', toSvgY(pointA.y));
            circleA.setAttribute('r', '5');
            circleA.setAttribute('fill', 'blue');
            pointsGroup.appendChild(circleA);
            
            // 点B
            const circleB = createSVGElement('circle');
            circleB.setAttribute('cx', toSvgX(pointB.x));
            circleB.setAttribute('cy', toSvgY(pointB.y));
            circleB.setAttribute('r', '5');
            circleB.setAttribute('fill', 'blue');
            pointsGroup.appendChild(circleB);
            
            // 点C
            const circleC = createSVGElement('circle');
            circleC.setAttribute('cx', toSvgX(pointC.x));
            circleC.setAttribute('cy', toSvgY(pointC.y));
            circleC.setAttribute('r', '5');
            circleC.setAttribute('fill', 'blue');
            pointsGroup.appendChild(circleC);
            
            // 点T
            const circleT = createSVGElement('circle');
            circleT.setAttribute('cx', toSvgX(pointT.x));
            circleT.setAttribute('cy', toSvgY(pointT.y));
            circleT.setAttribute('r', '3');
            circleT.setAttribute('fill', '#00cc00');
            pointsGroup.appendChild(circleT);

            // 在三角形内标注三个顶点的坐标
            const trianglePoint1 = createSVGElement('text');
            trianglePoint1.setAttribute('x', toSvgX(3) - 60);
            trianglePoint1.setAttribute('y', toSvgY(6));
            trianglePoint1.setAttribute('fill', 'orange');
            trianglePoint1.textContent = 'C(3,6)';
            markersGroup.appendChild(trianglePoint1);

            const trianglePoint2 = createSVGElement('text');
            trianglePoint2.setAttribute('x', toSvgX(144/37) + 10);
            trianglePoint2.setAttribute('y', toSvgY(6));
            trianglePoint2.setAttribute('fill', 'orange');
            trianglePoint2.textContent = '(144/37,6)';
            markersGroup.appendChild(trianglePoint2);

            const trianglePoint3 = createSVGElement('text');
            trianglePoint3.setAttribute('x', toSvgX(144/37) + 10);
            trianglePoint3.setAttribute('y', toSvgY(24/37));
            trianglePoint3.setAttribute('fill', 'orange');
            trianglePoint3.textContent = 'T(144/37,24/37)';
            markersGroup.appendChild(trianglePoint3);

            // 标记A
            const textA = createSVGElement('text');
            textA.setAttribute('x', toSvgX(pointA.x) + 10);
            textA.setAttribute('y', toSvgY(pointA.y) - 10);
            textA.textContent = 'A(0,0)';
            markersGroup.appendChild(textA);
            
            // 标记B
            const textB = createSVGElement('text');
            textB.setAttribute('x', toSvgX(pointB.x) + 10);
            textB.setAttribute('y', toSvgY(pointB.y) - 10);
            textB.textContent = 'B(6,1)';
            markersGroup.appendChild(textB);

            // 在T点绘制直角符号
            const rightAngleT = createSVGElement('path');
            const rightAngleSize = 10;
            const rightAngleX = toSvgX(pointT.x);
            const rightAngleY = toSvgY(pointT.y);
            rightAngleT.setAttribute('d', `M ${rightAngleX} ${rightAngleY - rightAngleSize} 
                                        L ${rightAngleX} ${rightAngleY} 
                                        L ${rightAngleX + rightAngleSize} ${rightAngleY}`);
            rightAnglesGroup.appendChild(rightAngleT);
            
            // 按顺序添加所有组到SVG
            svg.appendChild(gridGroup);
            svg.appendChild(axisGroup);
            svg.appendChild(labelsGroup);
            svg.appendChild(shapeGroup);
            svg.appendChild(pointsGroup);
            svg.appendChild(markersGroup);
            svg.appendChild(rightAnglesGroup);
        }
        
        // 监听缩放变化
        document.getElementById('scale').addEventListener('input', function() {
            scale = parseInt(this.value);
            document.getElementById('scaleValue').textContent = scale;
            drawCoordinateSystem();
        });
        
        // 初始化绘图
        drawCoordinateSystem();
    </script>
</body>
</html> 